[
  {
    "objectID": "trabajos.html",
    "href": "trabajos.html",
    "title": "Trabajos: Reporte de aplicación multinivel",
    "section": "",
    "text": "El trabajo final del curso consiste en una aplicación práctica de la estimación de modelos multinivel a una problemática definida por l_s estudiantes utilizando datos secundarios. Este trabajo posee dos entregas, tal como se señala en el programa del curso: un informe de avance (30% nota final) y un informe final (40%). La presentación oral del trabajo equivale al 20% de la nota final, y el 10% restante a una evaluación de pares (detalles abajo)\nSe recomienda utilizar bases de datos con una estructura clara de al menos dos niveles, como las comparativas internacionales, o nacionales que puedan identificar comunas, o educacionales que puedan identificar colegios/salas. Se pueden revisar algunas bases de datos de la sección de recursos acá\nEl informe final debe tener formato de artículo o reporte breve de investigación, con las siguientes secciones y número de palabras sugeridas (entre 3.500-4500 palabras en total):\n\nTı́tulo\nAbstract: problema, pregunta, objetivo, datos (y N), resultado principal.\nIntroducción: definición de la problemática a abordar, su relevancia y enmarque dentro de los contenidos del curso. Es importante hacer referencia a la relevancia de variables contextuales y posible interacción con variables individuales, ası́ como también a la relevancia sociológica del estudio. Como es un artı́culo breve, la introducción incluye también antecedentes conceptuales y de estudios anteriores (1000 palabras)\nObjetivos e hipótesis (incluir hipótesis diferenciadas por niveles) (250 palabras)\nDatos, variables y métodos: datos a utilizar (N general y aproximado por unidad de nivel 2, descripción general de los datos, año de aplicación) variables, estadı́sticos descriptivos univariados, descripción de los modelos a estimar (500 palabras).\nResultados: se recomienda la menor cantidad de tablas con resumen de modelos estimados, gráficos, descripción e interpretación de los principales hallazgos en relación a las preguntas de investigación (1500-2000 palabras)\nResumen y conclusiones: principales hallazgos, respuesta a preguntas, ventajas de la estimación multinivel para abordar la problemática, limitaciones, recomendaciones para futuras investigaciones (250 - 500 palabras).\nBibliografı́a\n\nFormato: Idealmente en formato html/(R)Markdown; en caso de formato papel, tamaño carta, letra times new roman o LM Roman 12, espaciado 1,5, margenes de 2 cm, número de página. En todos los casos se debe adjuntar el código de análisis; si en el informe de avance se utiliza Rmarkdown - html se puede incluir el código (”chunks”) en el informe. Lo importante, sobre todo en la primera entrega, es preocuparse por el contenido más que el formato.\nEn términos de contenidos, para el informe de avance se espera un reporte de alrededor de 2000 palabras que sea una especie de borrador del informe final. El énfasis de esta primera entrega se encuentra en el planteamiento del problema y preguntas de investigación en una lógica multinivel, descripción de los datos, estimación de correlación intra-clase, efectos aleatorios y modelos preliminares. En la segunda entrega se complementan los análisis con temas de interacciones entre niveles, evaluación de ajuste, centrado de variables y análisis de casos influyentes.\n\nPresentación oral\nLas presentaciones son breves, máximo 10 minutos y luego 5 a 10 minutos de preguntas, comentarios y sugerencias. Se debe elaborar un documento a proyectar que acompañe la presentación, máximo 15 láminas. No es necesario que presenten todos los integrantes del grupo, pero sí todos deben estar disponibles para responder preguntas. La asistencia a las presentaciones es obligatoria.\n\n\nEvaluación de pares\nTal como se establece en el programa, la evaluación contempla un componente de revisión de trabajo de compañeros, que será de la primera entrega para que sirva como retroalimentación para la segunda. A cada grupo se asignará un trabajo, del cual presentará un informe de evaluación orientado por las siguientes dimensiones:\n\nClaridad del problema de investigación en sentido multinivel\nAntecedentes conceptuales y empíricos\nDescripción de la metodología\nCalidad de los análisis (aspecto central, considerar si se cubren adecuadamente los contenidos del curso)\nDiscusión de los hallazgos\nRecomendaciones\n\nEl informe debe tener una extensión máxima de 700 palabras, y debe ser entregado una semana posterior a la entrega del primer trabajo.\n\n\nAutoevaluación\nSe debe entregar al final del curso un reporte de autoevaluación. Para ello responda en una escala de 1 a 7 y fundamente:\n\nSobre participación e involucramiento con el curso:\n\n\nLecturas clase a clase\nTiempo de dedicación acorde a los requerimientos del curso\nParticipación activa en clases\nColaboración con compañeros\nEntrega oportuna de informes\nCalidad de mis presentaciones\nCalidad de mis informes\nEn general, evalúo mi calidad como alumno de este curso con una nota (justificar):\n\n\nSobre cumplimiento de objetivos: luego del curso, me considero capaz de:\n\n\nComprender la aplicación de los métodos multinivel a problemas de investigación sociológicos\nEndenter el concepto de datos jerárquicos\nEntender el concepto de estimación con efectos aleatorios\nEstimar modelos de multinivel\nInterpretar los principales parámetros de modelos multinivel\nEvaluar ajuste de modelos multinivel\nReportar metodología, resultados y discusión de estimación con modelos de multinivel\nEntender los resultados de un artículo que utilice métodos multinivel\n\n\nConsiderando todo lo anterior, ¿qué nota final consideraría justa para mí en este curso?\n\n\n\nNormas generales de entregas\n\nHasta las 23:59:00 del dı́a indicado, via Ucursos,\n0.5 por dı́a corrido de atraso, hasta 3 dı́as\nSe entrega documento de trabajo y también código de análisis.\nEn caso de atraso por enfermedad presentar certificado médico a secretarı́a de carrera.\nEn el marco de ciencia abierta que promueve el curso, los documentos del trabajo, código y presentaciones serán puestos a disposición de todos los participantes.\n\n\n\nForo de preguntas sobre el trabajo"
  },
  {
    "objectID": "schedule.html",
    "href": "schedule.html",
    "title": "Planificación",
    "section": "",
    "text": "Este curso se compone de tres actividades principales a la semana:\n\n Clases lectivas presenciales: los viernes de 10:15 a 11:45, donde en base a las lecturas correspondientes a esa semana se presentará un resumen de los contenidos principales y se resolverán dudas.\n Talleres prácticos: Actividades a ser desarrolladas de manera autónoma por l_s estudiantes durante la semana\n Lecturas: cada sesión lectiva tiene una lectura obligatoria asignada a la semana, la que se encuentra a disposición en esta página.\n\n\n\n\n\n\n\n\n\n\n\n\n\nAgosto\n11\nIntroducción\nColeman 1986\nLeer el programa del curso\n\n\n\n\n18\nBases: Realizar el práctico 1 de manera autónoma (no hay sesión de clases esta semana\nFinch cap. 1\nMoore: Comprensión de los datos\nPráctico 1: Preparación de datos con R\n\n\n\n\n25\nEstimación con distintos niveles\nFinch cap. 2\nPráctico 2: Estimando a distintos niveles\n\n\n\nSeptiembre\n01\nCorrelación intra clase y estimación MLM\nFinch cap. 3\nPráctico 3: Estimación multinivel con lmer\n\n\n\n\n08\nAjuste y Reporte\nO’Conell & McCoach 7, Evaluating model fit and adequacy\nO’Conell & McCoach 11, Reporting results from multilevel\nPractico 4: Combinando datos de distintos niveles\n\n\n\n\n15\nSemana de pausa\n\n\n\n\n\n\n22\nSemana de asesoría, inscripciones aquí\n\n\n\n\n\n\n28\nEntrega trabajo 1\n\n\n\n\n\n\n29\nEfectos Aleatorios\n\nPractico 5: Efectos aleatorios\n\n\n\nOctubre\n6\nRonda de presentaciones grupales\n\n\n\n\n\n\n13\nInteracción entre niveles\nAguinis et al (2013) Best practices MLM interactions\nPráctica 6: Interacciones entre niveles\n\n\n\n\n20\nCentrado\nEnders & Tofighi 2007) Centering predictor variables MLM\nPráctico 7: Centrado\n\n\n\n\n27\nFeriado\n\n\n\n\n\nNoviembre\n3\nSemana de trabajo autónomo\n\nPráctico 8: Reporte\n\n\n\n\n10\nExtensiones\nCatching Up on Multilevel Modeling\nPraćtico 9: Extensiones\n\n\n\n\n17\nPresentación de trabajos\n\n\n\n\n\n\n24\nPresentación de trabajos\nEntrega trabajo final"
  },
  {
    "objectID": "schedule.html#forma-general-de-funcionamiento",
    "href": "schedule.html#forma-general-de-funcionamiento",
    "title": "Planificación",
    "section": "",
    "text": "Este curso se compone de tres actividades principales a la semana:\n\n Clases lectivas presenciales: los viernes de 10:15 a 11:45, donde en base a las lecturas correspondientes a esa semana se presentará un resumen de los contenidos principales y se resolverán dudas.\n Talleres prácticos: Actividades a ser desarrolladas de manera autónoma por l_s estudiantes durante la semana\n Lecturas: cada sesión lectiva tiene una lectura obligatoria asignada a la semana, la que se encuentra a disposición en esta página.\n\n\n\n\n\n\n\n\n\n\n\n\n\nAgosto\n11\nIntroducción\nColeman 1986\nLeer el programa del curso\n\n\n\n\n18\nBases: Realizar el práctico 1 de manera autónoma (no hay sesión de clases esta semana\nFinch cap. 1\nMoore: Comprensión de los datos\nPráctico 1: Preparación de datos con R\n\n\n\n\n25\nEstimación con distintos niveles\nFinch cap. 2\nPráctico 2: Estimando a distintos niveles\n\n\n\nSeptiembre\n01\nCorrelación intra clase y estimación MLM\nFinch cap. 3\nPráctico 3: Estimación multinivel con lmer\n\n\n\n\n08\nAjuste y Reporte\nO’Conell & McCoach 7, Evaluating model fit and adequacy\nO’Conell & McCoach 11, Reporting results from multilevel\nPractico 4: Combinando datos de distintos niveles\n\n\n\n\n15\nSemana de pausa\n\n\n\n\n\n\n22\nSemana de asesoría, inscripciones aquí\n\n\n\n\n\n\n28\nEntrega trabajo 1\n\n\n\n\n\n\n29\nEfectos Aleatorios\n\nPractico 5: Efectos aleatorios\n\n\n\nOctubre\n6\nRonda de presentaciones grupales\n\n\n\n\n\n\n13\nInteracción entre niveles\nAguinis et al (2013) Best practices MLM interactions\nPráctica 6: Interacciones entre niveles\n\n\n\n\n20\nCentrado\nEnders & Tofighi 2007) Centering predictor variables MLM\nPráctico 7: Centrado\n\n\n\n\n27\nFeriado\n\n\n\n\n\nNoviembre\n3\nSemana de trabajo autónomo\n\nPráctico 8: Reporte\n\n\n\n\n10\nExtensiones\nCatching Up on Multilevel Modeling\nPraćtico 9: Extensiones\n\n\n\n\n17\nPresentación de trabajos\n\n\n\n\n\n\n24\nPresentación de trabajos\nEntrega trabajo final"
  },
  {
    "objectID": "resource/index.html",
    "href": "resource/index.html",
    "title": "Recursos",
    "section": "",
    "text": "En esta sección se irán subiendo una serie de recursos relacionados con el curso."
  },
  {
    "objectID": "resource/index.html#artículos-de-investigación-que-utilizan-metodología-multinivel-en-ámbitos-asociados-a-sociología",
    "href": "resource/index.html#artículos-de-investigación-que-utilizan-metodología-multinivel-en-ámbitos-asociados-a-sociología",
    "title": "Recursos",
    "section": "Artículos de investigación que utilizan metodología multinivel en ámbitos asociados a sociología",
    "text": "Artículos de investigación que utilizan metodología multinivel en ámbitos asociados a sociología\n\nFuentes-Balderrama, J., Rivera-Heredia (2022). Factores personales, contextuales y académicos asociados a la reprobación en educación superior: Una muestra nacional mexicana. Revista mexicana de investigación educativa, 27(95), 1039–1062.\nChacón Espejo, S. K., Paredes Araya, D., Chacón Espejo, S. K., & Paredes Araya, D. (2015). Desigualdad espacial de ingresos en Chile y su relación con la concentración de capital humano. El trimestre económico, 82(326), 351–377."
  },
  {
    "objectID": "resource/index.html#reporte",
    "href": "resource/index.html#reporte",
    "title": "Recursos",
    "section": "Reporte",
    "text": "Reporte\n\nTablas con R, con ejemplo de canciones de Spotify\nIntroduction to Quarto"
  },
  {
    "objectID": "resource/index.html#uso-de-r",
    "href": "resource/index.html#uso-de-r",
    "title": "Recursos",
    "section": "Uso de R",
    "text": "Uso de R\n\nConocimientos básicos de programación en R\nImportar datos en R\nProcesamiento y análisis de datos en R (tidyverse)\nProcesamiento y análisis de datos en R (base)\nMás para aprender R"
  },
  {
    "objectID": "resource/index.html#visualización",
    "href": "resource/index.html#visualización",
    "title": "Recursos",
    "section": "Visualización",
    "text": "Visualización\n\nVisualización descriptiva de datos en R\nR Graph Gallery"
  },
  {
    "objectID": "resource/index.html#bases-de-datos",
    "href": "resource/index.html#bases-de-datos",
    "title": "Recursos",
    "section": "Bases de datos",
    "text": "Bases de datos\n\nComparativas internacionales\n\nWorld Values Survey\nISSP\nESS\nLAPOP\nLatinobarómetro\nICILS: International Computer and Information Literacy Study\n\n\n\nNacionales\n\nEncuestas CEP\nELSOC\nCASEN\nENE\nESI\nENCLA\nENUT\nEstudios PNUD\nEANNA\n\n\n\nInternacionales\n\nILO\nWID\nSWIID\nICTWSS\nOECD\nBanco Mundial"
  },
  {
    "objectID": "news/2023-01-09_welcome.html",
    "href": "news/2023-01-09_welcome.html",
    "title": "Bienvenid_s a clases!",
    "section": "",
    "text": "← News\n\n\n\nHola a todos!"
  },
  {
    "objectID": "example/index.html",
    "href": "example/index.html",
    "title": "Code examples",
    "section": "",
    "text": "Visit this section after you have finished the readings and lecture videos. It contains fully annotated R code and other supplementary information and it will be indispensable as you work on your problem sets and project.\nMany sections also contain videos of me live coding the examples so you can see what it looks like to work with R in real time. You’ll notice me make all sorts of little errors, which is totally normal—everyone does!"
  },
  {
    "objectID": "content/index.html",
    "href": "content/index.html",
    "title": "Sobre clases y lecturas",
    "section": "",
    "text": "Cada clase tiene como referencia lecturas que deben completarse antes de la sesión correspondiente.\nEn esta sección se encuentran disponibles los documentos de presentación que sirven de base a cada clase. Para verlos en pantalla completa presionar F sobre el documento."
  },
  {
    "objectID": "content/08-content.html",
    "href": "content/08-content.html",
    "title": "Presentación",
    "section": "",
    "text": "Documento de presentación\n\n\n\n\nForo"
  },
  {
    "objectID": "content/06-content.html",
    "href": "content/06-content.html",
    "title": "Presentación",
    "section": "",
    "text": "Documento de presentación\n\n\n\n\nVideo de la sesion\n\n\n\n\n\n\n\nForo"
  },
  {
    "objectID": "content/04-content.html",
    "href": "content/04-content.html",
    "title": "Presentación",
    "section": "",
    "text": "Documento de presentación\n\n\n\n\nForo"
  },
  {
    "objectID": "content/02-content.html",
    "href": "content/02-content.html",
    "title": "Presentación",
    "section": "",
    "text": "En esta sesión se desarrolla el práctico 1 de manera autónoma.\n\nForo"
  },
  {
    "objectID": "assignment/pruebas_here.html",
    "href": "assignment/pruebas_here.html",
    "title": "Práctica 4. Trabajando con variables nivel 2",
    "section": "",
    "text": "#here::here()\ngetwd()\n\n[1] \"/home/juank/Dropbox/github/github-organizations/cursos-metodos-facso/multinivel-facso\"\n\n#setwd(here::here())\n#getwd()"
  },
  {
    "objectID": "assignment/06-practico.html",
    "href": "assignment/06-practico.html",
    "title": "Interacción entre niveles",
    "section": "",
    "text": "pacman::p_load(lme4,haven,foreign, stargazer, texreg, lattice, sjPlot, dplyr, ggplot2, ggeffects) # paquetes a cargar"
  },
  {
    "objectID": "assignment/06-practico.html#datos",
    "href": "assignment/06-practico.html#datos",
    "title": "Interacción entre niveles",
    "section": "2.1 Datos",
    "text": "2.1 Datos\n\nmlm = read_dta(\"http://www.stata-press.com/data/mlmus3/hsb.dta\")\ndim(mlm)\nnames(mlm)\nattach(mlm)\n\nTabla estadisticos descriptivos\n\nstargazer(as.data.frame(mlm),title=\"Estadísticos descriptivos\", type = \"text\")\n\n\nEstadísticos descriptivos\n===================================================\nStatistic   N     Mean    St. Dev.    Min     Max  \n---------------------------------------------------\nminority  7,185   0.275     0.446      0       1   \nfemale    7,185   0.528     0.499      0       1   \nses       7,185  0.0001     0.779   -3.758   2.692 \nmathach   7,185  12.748     6.878   -2.832  24.993 \nsize      7,185 1,056.862  604.172    100    2,713 \nsector    7,185   0.493     0.500      0       1   \npracad    7,185   0.534     0.251    0.000   1.000 \ndisclim   7,185  -0.132     0.944   -2.416   2.756 \nhiminty   7,185   0.280     0.449      0       1   \nschoolid  7,185 5,277.898 2,499.578  1,224   9,586 \nmean      7,185  12.748     3.006    4.240  19.719 \nsd        7,185   6.198     0.864    3.541   8.481 \nsdalt     7,185   6.256     0.000    6.256   6.256 \njunk      7,185  47.316    48.898   0.00002 239.289\nsdalt2    7,185  48.394     0.000   48.394  48.394 \nnum       7,185  48.016    10.822     14      67   \nse        7,185   0.919     0.202    0.506   1.824 \nsealt     7,185   0.925     0.129    0.764   1.672 \nsealt2    7,185   1.028     0.144    0.850   1.859 \nt2        7,185  14.656    26.416    0.001  195.811\nt2alt     7,185   8.538    11.063    0.001  52.825 \npickone   7,185   0.022     0.148      0       1   \nmmses     7,185  0.0001     0.414   -1.194   0.825 \nmnses     7,185  0.0001     0.414   -1.194   0.825 \nxb        7,185  12.685     2.425    5.684  17.522 \nresid     7,185   0.062     6.459   -19.489 16.445 \n---------------------------------------------------"
  },
  {
    "objectID": "assignment/06-practico.html#modelos",
    "href": "assignment/06-practico.html#modelos",
    "title": "Interacción entre niveles",
    "section": "2.2 Modelos",
    "text": "2.2 Modelos\n\nRevisar estructura variable para la interacción\n\nstr(mlm$sector)\nnum [1:7185] 0 0 0 0 0 0 0 0 0 0 … - attr(*, “format.stata”)= chr “%8.0g”\ntable(mlm$sector)\n0 1 3642 3543\nmlm$sector_f=as.factor(mlm$sector) # Cambiar a factor\n\nPendiente fija & aleatoria\n\n\nreg_mlm3a = lmer(mathach ~ 1 + ses + sector_f +  mnses + (1 | schoolid),data=mlm)\n\n# Con pendiente aleatoria\nreg_mlm3b = lmer(mathach ~ 1 + ses + sector_f +  mnses + (1 + ses | schoolid),data=mlm)\n\n\nDevianza (ajuste comparativo pendiente fija vs aleatoria)\n\n\nanova(reg_mlm3b,reg_mlm3a)\n\nData: mlm\nModels:\nreg_mlm3a: mathach ~ 1 + ses + sector_f + mnses + (1 | schoolid)\nreg_mlm3b: mathach ~ 1 + ses + sector_f + mnses + (1 + ses | schoolid)\n          npar   AIC   BIC logLik deviance  Chisq Df Pr(&gt;Chisq)  \nreg_mlm3a    6 46560 46602 -23274    46548                       \nreg_mlm3b    8 46558 46613 -23271    46542 6.0463  2    0.04865 *\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\n\n\nEstimar modelo con interacción\n\n\nreg_mlm3c = lmer(mathach ~ 1 + ses + sector_f + ses*sector_f + mnses +  (1 + ses | schoolid), data=mlm)\nscreenreg(c(reg_mlm3a,reg_mlm3b, reg_mlm3c))\n\n\n==========================================================================\n                               Model 1        Model 2        Model 3      \n--------------------------------------------------------------------------\n(Intercept)                        12.13 ***      12.04 ***      12.20 ***\n                                   (0.20)         (0.20)         (0.20)   \nses                                 2.19 ***       2.20 ***       2.78 ***\n                                   (0.11)         (0.12)         (0.14)   \nsector_f1                           1.22 ***       1.41 ***       1.27 ***\n                                   (0.31)         (0.31)         (0.30)   \nmnses                               3.15 ***       3.16 ***       3.13 ***\n                                   (0.38)         (0.39)         (0.38)   \nses:sector_f1                                                    -1.33 ***\n                                                                 (0.21)   \n--------------------------------------------------------------------------\nAIC                             46565.83       46563.47       46532.06    \nBIC                             46607.11       46618.51       46593.98    \nLog Likelihood                 -23276.92      -23273.74      -23257.03    \nNum. obs.                        7185           7185           7185       \nNum. groups: schoolid             160            160            160       \nVar: schoolid (Intercept)           2.37           2.43           2.34    \nVar: Residual                      37.02          36.78          36.79    \nVar: schoolid ses                                  0.47           0.07    \nCov: schoolid (Intercept) ses                      0.29           0.18    \n==========================================================================\n*** p &lt; 0.001; ** p &lt; 0.01; * p &lt; 0.05"
  },
  {
    "objectID": "assignment/06-practico.html#plot",
    "href": "assignment/06-practico.html#plot",
    "title": "Interacción entre niveles",
    "section": "2.3 Plot",
    "text": "2.3 Plot\n\nplot_model(reg_mlm3c, type = \"int\")"
  },
  {
    "objectID": "assignment/06-practico.html#datos-1",
    "href": "assignment/06-practico.html#datos-1",
    "title": "Interacción entre niveles",
    "section": "3.1 Datos",
    "text": "3.1 Datos\n\nexdata=read.csv(\"https://multinivel.netlify.com/practicas/data/aguinis_JOM.csv\", header = TRUE, sep = \",\")\nstargazer(exdata, type = \"text\")\n\n\n============================================\nStatistic  N   Mean  St. Dev.   Min    Max  \n--------------------------------------------\nl1id      630 3.500   1.709      1      6   \nl2id      630 53.000  30.334     1     105  \nX         630 4.800   1.500    0.221  8.731 \nXbarj     630 4.800   0.793    3.319  6.907 \nWj        630 4.770   0.700    2.966  6.987 \ncat       630 0.505   0.500      0      1   \nY         630 5.720   0.900    2.739  8.381 \nXc        630 0.000   1.273   -3.904  3.865 \nXcWj      630 -0.000  6.196   -22.683 18.487\nWjc       630 -0.000  0.700   -1.804  2.217 \n--------------------------------------------\n\n\n\nRename variables para que sean más coherentes con el ejemplo\n\n\nexdata &lt;- exdata %&gt;% rename(LMX=Xc,Lidclim=Wjc)\n\n\nVariables relevantes\n\nl2id: id de nivel 2, equipos de trabajo\nLMX: quality of leader–member exchange\nLidclim: clima de liderazgo en el equipo\nY: variable dependiente, empoderamiento individual"
  },
  {
    "objectID": "assignment/06-practico.html#modelos-1",
    "href": "assignment/06-practico.html#modelos-1",
    "title": "Interacción entre niveles",
    "section": "3.2 Modelos",
    "text": "3.2 Modelos\n\nModelo Nulo e ICC\n\n\nlmm.fit1=lmer(Y ~ 1 + (1|l2id), data=exdata,REML=F)\nsummary(lmm.fit1)\n\nLinear mixed model fit by maximum likelihood  ['lmerMod']\nFormula: Y ~ 1 + (1 | l2id)\n   Data: exdata\n\n     AIC      BIC   logLik deviance df.resid \n  1643.0   1656.4   -818.5   1637.0      627 \n\nScaled residuals: \n     Min       1Q   Median       3Q      Max \n-2.96708 -0.61992 -0.00518  0.60150  2.88977 \n\nRandom effects:\n Groups   Name        Variance Std.Dev.\n l2id     (Intercept) 0.09494  0.3081  \n Residual             0.71378  0.8449  \nNumber of obs: 630, groups:  l2id, 105\n\nFixed effects:\n            Estimate Std. Error t value\n(Intercept)  5.72000    0.04513   126.7\n\nreghelper::ICC(lmm.fit1)\n\n[1] 0.1173919\n\n\n\nModelo con predictores fijos\n\n\nlmm.fit2=lmer(Y ~1 + LMX + Lidclim +(1|l2id),data=exdata,REML=F)\nscreenreg(lmm.fit2)\n\n\n==================================\n                       Model 1    \n----------------------------------\n(Intercept)               5.72 ***\n                         (0.04)   \nLMX                       0.28 ***\n                         (0.02)   \nLidclim                   0.35 ***\n                         (0.05)   \n----------------------------------\nAIC                    1487.64    \nBIC                    1509.87    \nLog Likelihood         -738.82    \nNum. obs.               630       \nNum. groups: l2id       105       \nVar: l2id (Intercept)     0.06    \nVar: Residual             0.56    \n==================================\n*** p &lt; 0.001; ** p &lt; 0.01; * p &lt; 0.05\n\n\n\nPendiente aleatoria\n\n\nlmm.fit3=lmer(Y ~1 + LMX + Lidclim +(1 + LMX|l2id), data=exdata,REML=F)\nsummary(lmm.fit3)\n\nLinear mixed model fit by maximum likelihood  ['lmerMod']\nFormula: Y ~ 1 + LMX + Lidclim + (1 + LMX | l2id)\n   Data: exdata\n\n     AIC      BIC   logLik deviance df.resid \n  1483.5   1514.6   -734.7   1469.5      623 \n\nScaled residuals: \n    Min      1Q  Median      3Q     Max \n-3.0693 -0.5814 -0.0309  0.5965  3.5938 \n\nRandom effects:\n Groups   Name        Variance Std.Dev. Corr \n l2id     (Intercept) 0.06802  0.2608        \n          LMX         0.02529  0.1590   -0.09\n Residual             0.51438  0.7172        \nNumber of obs: 630, groups:  l2id, 105\n\nFixed effects:\n            Estimate Std. Error t value\n(Intercept)  5.72000    0.03827 149.478\nLMX          0.26958    0.02829   9.530\nLidclim      0.35570    0.05468   6.505\n\nCorrelation of Fixed Effects:\n        (Intr) LMX   \nLMX     -0.034       \nLidclim  0.000 -0.001\n\n\nDeviance\n\nanova(lmm.fit2,lmm.fit3)\n\nData: exdata\nModels:\nlmm.fit2: Y ~ 1 + LMX + Lidclim + (1 | l2id)\nlmm.fit3: Y ~ 1 + LMX + Lidclim + (1 + LMX | l2id)\n         npar    AIC    BIC  logLik deviance  Chisq Df Pr(&gt;Chisq)  \nlmm.fit2    5 1487.6 1509.9 -738.82   1477.6                       \nlmm.fit3    7 1483.5 1514.6 -734.75   1469.5 8.1422  2    0.01706 *\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\n\n\nModelo con interacción entre niveles\n\n\nlmm.fit4=lmer(Y ~1 + LMX*Lidclim + (1 + LMX|l2id), data=exdata, REML=F)\nscreenreg(lmm.fit4)\n\n\n======================================\n                           Model 1    \n--------------------------------------\n(Intercept)                   5.72 ***\n                             (0.04)   \nLMX                           0.27 ***\n                             (0.03)   \nLidclim                       0.35 ***\n                             (0.05)   \nLMX:Lidclim                   0.10 ** \n                             (0.04)   \n--------------------------------------\nAIC                        1478.19    \nBIC                        1513.76    \nLog Likelihood             -731.10    \nNum. obs.                   630       \nNum. groups: l2id           105       \nVar: l2id (Intercept)         0.07    \nVar: l2id LMX                 0.02    \nCov: l2id (Intercept) LMX    -0.00    \nVar: Residual                 0.52    \n======================================\n*** p &lt; 0.001; ** p &lt; 0.01; * p &lt; 0.05"
  },
  {
    "objectID": "assignment/06-practico.html#reporte-final",
    "href": "assignment/06-practico.html#reporte-final",
    "title": "Interacción entre niveles",
    "section": "3.3 Reporte final",
    "text": "3.3 Reporte final\n\nTabla\n\n\nscreenreg(list(lmm.fit1, lmm.fit2, lmm.fit3, lmm.fit4))\n\n\n=============================================================================\n                           Model 1      Model 2      Model 3      Model 4    \n-----------------------------------------------------------------------------\n(Intercept)                   5.72 ***     5.72 ***     5.72 ***     5.72 ***\n                             (0.05)       (0.04)       (0.04)       (0.04)   \nLMX                                        0.28 ***     0.27 ***     0.27 ***\n                                          (0.02)       (0.03)       (0.03)   \nLidclim                                    0.35 ***     0.36 ***     0.35 ***\n                                          (0.05)       (0.05)       (0.05)   \nLMX:Lidclim                                                          0.10 ** \n                                                                    (0.04)   \n-----------------------------------------------------------------------------\nAIC                        1643.04      1487.64      1483.50      1478.19    \nBIC                        1656.38      1509.87      1514.62      1513.76    \nLog Likelihood             -818.52      -738.82      -734.75      -731.10    \nNum. obs.                   630          630          630          630       \nNum. groups: l2id           105          105          105          105       \nVar: l2id (Intercept)         0.09         0.06         0.07         0.07    \nVar: Residual                 0.71         0.56         0.51         0.52    \nVar: l2id LMX                                           0.03         0.02    \nCov: l2id (Intercept) LMX                              -0.00        -0.00    \n=============================================================================\n*** p &lt; 0.001; ** p &lt; 0.01; * p &lt; 0.05\n\n\nEn html\nhtmlreg(list(lmm.fit1, lmm.fit2, lmm.fit3, lmm.fit4),\n    custom.model.names = c(\"Nulo\",\"Pendiente &lt;br&gt; fija\",\"Pendiente &lt;br&gt; Aleatoria\", \"Interacción\"),\n    custom.coef.names = c(\"Intercepto\", \"LMX $(\\\\gamma_{10})$\" ,\"Clima liderazgo $(\\\\gamma_{01})$\", \"LMX*Clima $(\\\\gamma_{11})$\"),\n    custom.gof.names=c(NA,NA,NA,NA,NA,\n                   \"Var: l2id ($\\\\tau_{00}$)\",\n                   \"Var: Residual ($\\\\sigma^2$)\",\n                   \"Var: l2id LMX ($\\\\tau_{11}$)\",\n                   \"Cov: l2id (Intercept) LMX ($\\\\tau_{01}$)\"),\n    custom.note = \"%stars. Errores estándar en paréntesis\",\n    caption=\"Replicacion Tabla Aguinis\",\n    caption.above=TRUE,\n    digits=3,\n    doctype = FALSE)\n\n\n\nReplicacion Tabla Aguinis\n\n\n\n\n \n\n\nNulo\n\n\nPendiente  fija\n\n\nPendiente  Aleatoria\n\n\nInteracción\n\n\n\n\n\n\nIntercepto\n\n\n5.720***\n\n\n5.720***\n\n\n5.720***\n\n\n5.720***\n\n\n\n\n \n\n\n(0.045)\n\n\n(0.038)\n\n\n(0.038)\n\n\n(0.038)\n\n\n\n\nLMX \\((\\gamma_{10})\\)\n\n\n \n\n\n0.279***\n\n\n0.270***\n\n\n0.269***\n\n\n\n\n \n\n\n \n\n\n(0.023)\n\n\n(0.028)\n\n\n(0.027)\n\n\n\n\nClima liderazgo \\((\\gamma_{01})\\)\n\n\n \n\n\n0.351***\n\n\n0.356***\n\n\n0.351***\n\n\n\n\n \n\n\n \n\n\n(0.055)\n\n\n(0.055)\n\n\n(0.055)\n\n\n\n\nLMX*Clima \\((\\gamma_{11})\\)\n\n\n \n\n\n \n\n\n \n\n\n0.104**\n\n\n\n\n \n\n\n \n\n\n \n\n\n \n\n\n(0.037)\n\n\n\n\nAIC\n\n\n1643.040\n\n\n1487.641\n\n\n1483.499\n\n\n1478.192\n\n\n\n\nBIC\n\n\n1656.377\n\n\n1509.870\n\n\n1514.619\n\n\n1513.758\n\n\n\n\nLog Likelihood\n\n\n-818.520\n\n\n-738.821\n\n\n-734.749\n\n\n-731.096\n\n\n\n\nNum. obs.\n\n\n630\n\n\n630\n\n\n630\n\n\n630\n\n\n\n\nNum. groups: l2id\n\n\n105\n\n\n105\n\n\n105\n\n\n105\n\n\n\n\nVar: l2id (\\(\\tau_{00}\\))\n\n\n0.095\n\n\n0.060\n\n\n0.068\n\n\n0.068\n\n\n\n\nVar: Residual (\\(\\sigma^2\\))\n\n\n0.714\n\n\n0.563\n\n\n0.514\n\n\n0.516\n\n\n\n\nVar: l2id LMX (\\(\\tau_{11}\\))\n\n\n \n\n\n \n\n\n0.025\n\n\n0.019\n\n\n\n\nCov: l2id (Intercept) LMX (\\(\\tau_{01}\\))\n\n\n \n\n\n \n\n\n-0.004\n\n\n-0.004\n\n\n\n\n\n\n***p &lt; 0.001; **p &lt; 0.01; *p &lt; 0.05. Errores estándar en paréntesis\n\n\n\n\n\n\nInteraction Plot\n\n\nplot_model(lmm.fit4, type = \"int\")"
  },
  {
    "objectID": "assignment/04-practico.html",
    "href": "assignment/04-practico.html",
    "title": "Combinando datos de distintos niveles",
    "section": "",
    "text": "1 Introducción\nDesde un punto de vista operativo, las variables de nivel dos se pueden clasificar en dos tipos:\n\nLas que se pueden generar a partir desde los datos individuales (como por ejemplo, promedio/porcentaje de una variable de nivel 1)\nLas que provienen de fuentes externas a los datos individuales (ej: datos administrativos, nivel de democracia de un país, nivel de vulnerabilidad de una escuela, etc.)\n\nPara los ejemplos vamos a trabajar con la base de datos de ISSP 2009 (www.issp.org), modulo desigualdad económica (datos originales: ZA5400_v4-0-0.dta), y luego con la base del Quality of Government (http://qog.pol.gu.se/)\n\n\n2 Preparación de datos individuales\nPrimero cargamos la base de la encuesta ISSP desigualdad (mayor información sobre esta encuesta aquí)\n\n# Librerías\npacman::p_load(haven,descr,sjmisc,dplyr,sjPlot, ggplot2)\n\n# Data ISSP (original)\nissp2009 &lt;- read_dta(\"https://multinivel-facso.netlify.app/assignment/data/ZA5400_v4-0-0.dta\")\nnames(issp2009)\nnames(issp2009) &lt;- tolower(names(issp2009)) # cambia a minúsculas\n\nAlgunos ajustes preliminares a los datos:\nPrimero vamos a seleccionar algunas variables de la base de datos (para detalles, ver libro de códigos):\n\nv5 : ID país\nv10: para salir adelante lo importante es el esfuerzo\nsex: sexo\nage: edad (en años)\n\n\nissp2009r=issp2009 %&gt;% select(v5,v10,sex,age) # dplyr\n\nY ahora recodificaciones y limpieza de perdidos\n\n# v10: Esfuerzo\n  issp2009r$effort=issp2009r$v10\n  freq(issp2009r$effort) # freq es de descr\n\n\n\n\nQ1e Getting ahead: How important is hard work? \n      Frequency  Percent\n1         17432  31.1169\n2         24403  43.5605\n3         10568  18.8644\n4          2370   4.2306\n5           539   0.9621\n8           387   0.6908\n9           322   0.5748\nTotal     56021 100.0000\n\n  freq(to_label(issp2009r$effort)) #  to_label de sjmisc\n\n\n\n\nQ1e Getting ahead: How important is hard work? \n                     Frequency  Percent\nEssential                17432  31.1169\nVery important           24403  43.5605\nFairly important         10568  18.8644\nNot very important        2370   4.2306\nNot important at all       539   0.9621\nCant choose                387   0.6908\nNA                         322   0.5748\nTotal                    56021 100.0000\n\n  issp2009r$effort=set_na(issp2009r$effort,na = c(8,9))\n  issp2009r$effort=rec(issp2009r$effort, rec = \"rev\") # Reverse code, sjmisc \n  freq(to_label(issp2009r$effort)) # ok.\n\n\n\n\nQ1e Getting ahead: How important is hard work? \n                     Frequency  Percent Valid Percent\nNot important at all       539   0.9621        0.9745\nNot very important        2370   4.2306        4.2848\nFairly important         10568  18.8644       19.1062\nVery important           24403  43.5605       44.1188\nEssential                17432  31.1169       31.5158\nNA's                       709   1.2656              \nTotal                    56021 100.0000      100.0000\n\n  freq(issp2009r$effort) # ok.\n\n\n\n\nQ1e Getting ahead: How important is hard work? \n      Frequency  Percent Valid Percent\n1           539   0.9621        0.9745\n2          2370   4.2306        4.2848\n3         10568  18.8644       19.1062\n4         24403  43.5605       44.1188\n5         17432  31.1169       31.5158\nNA's        709   1.2656              \nTotal     56021 100.0000      100.0000\n\n# Sex\n  freq(issp2009r$sex);freq(to_label(issp2009r$sex))  # freq es de descr\n\n\n\n\nR: Sex \n      Frequency   Percent\n1         25184  44.95457\n2         30792  54.96510\n9            45   0.08033\nTotal     56021 100.00000\n\n\n\n\n\nR: Sex \n            Frequency   Percent\nMale            25184  44.95457\nFemale          30792  54.96510\nNA, refused        45   0.08033\nTotal           56021 100.00000\n\n  issp2009r$sex=rec(issp2009r$sex, rec=\"1=0 [Male];2=1[Female]; 9=NA\")\n\n# Age\n  freq(issp2009r$age)\n\n\n\n\nR: Age \n      Frequency   Percent\n15            6 1.071e-02\n16           92 1.642e-01\n17          131 2.338e-01\n18          838 1.496e+00\n19          895 1.598e+00\n20          911 1.626e+00\n21          861 1.537e+00\n22          861 1.537e+00\n23          830 1.482e+00\n24          887 1.583e+00\n25          877 1.565e+00\n26          901 1.608e+00\n27          923 1.648e+00\n28          941 1.680e+00\n29          959 1.712e+00\n30         1016 1.814e+00\n31          887 1.583e+00\n32         1039 1.855e+00\n33          951 1.698e+00\n34          975 1.740e+00\n35         1085 1.937e+00\n36         1033 1.844e+00\n37         1004 1.792e+00\n38         1060 1.892e+00\n39         1056 1.885e+00\n40         1122 2.003e+00\n41          970 1.731e+00\n42         1089 1.944e+00\n43         1069 1.908e+00\n44         1021 1.823e+00\n45         1095 1.955e+00\n46          973 1.737e+00\n47         1042 1.860e+00\n48         1071 1.912e+00\n49         1117 1.994e+00\n50         1104 1.971e+00\n51          984 1.756e+00\n52         1012 1.806e+00\n53         1007 1.798e+00\n54          937 1.673e+00\n55          986 1.760e+00\n56         1008 1.799e+00\n57          969 1.730e+00\n58          915 1.633e+00\n59          968 1.728e+00\n60         1079 1.926e+00\n61          905 1.615e+00\n62          934 1.667e+00\n63          814 1.453e+00\n64          774 1.382e+00\n65          807 1.441e+00\n66          742 1.325e+00\n67          738 1.317e+00\n68          679 1.212e+00\n69          663 1.183e+00\n70          712 1.271e+00\n71          540 9.639e-01\n72          578 1.032e+00\n73          516 9.211e-01\n74          516 9.211e-01\n75          471 8.408e-01\n76          406 7.247e-01\n77          360 6.426e-01\n78          350 6.248e-01\n79          307 5.480e-01\n80          324 5.784e-01\n81          222 3.963e-01\n82          223 3.981e-01\n83          157 2.803e-01\n84          144 2.570e-01\n85          121 2.160e-01\n86           85 1.517e-01\n87           63 1.125e-01\n88           48 8.568e-02\n89           57 1.017e-01\n90           24 4.284e-02\n91            8 1.428e-02\n92            8 1.428e-02\n93            8 1.428e-02\n94            6 1.071e-02\n95            4 7.140e-03\n97            5 8.925e-03\n98            7 1.250e-02\n99          138 2.463e-01\nTotal     56021 1.000e+02\n\n  issp2009r$age=set_na(issp2009r$age, na=c(99)) \n\n\n\n3 Generando datos nivel 2 a partir de datos individuales\nEn este caso se habla también de datos “agregados” o “colapsados”. Para agregar, utilizaremos primero una función simple para hacerlo en base al promedio\nPor ejemplo, agregar a la base de datos el promedio de edad por país (v5)\n\nissp2009r = issp2009r %&gt;%  \n  group_by(v5) %&gt;% \n  mutate(meanage = mean(age, na.rm = TRUE))\n\nOtros posibles agregados:\n\n# Desviación estándar\n    issp2009r = issp2009r %&gt;%  \n      group_by(v5) %&gt;% \n      mutate(sdage = sd(age, na.rm = TRUE))\n    \n# Tamaño (cantidad de casos por país)\n    issp2009r = issp2009r %&gt;%  \n      group_by(v5) %&gt;% \n      mutate(count = length(v5))\n\nVisualizar datos en tabla\n\nissp2009r %&gt;% \n  group_by(Country=to_label(v5)) %&gt;% \n  summarise(\"Mean Age\"=mean(meanage), \n            \"SD Age\"=mean(sdage), \n            N=mean(count)) %&gt;% \n  print(n = nrow(.))\n\n# A tibble: 41 × 4\n   Country                                `Mean Age` `SD Age`     N\n   &lt;fct&gt;                                       &lt;dbl&gt;    &lt;dbl&gt; &lt;dbl&gt;\n 1 AR-Argentina                                 46.7     17.5  1133\n 2 AU-Australia                                 52.5     16.8  1525\n 3 AT-Austria                                   45.1     17.1  1019\n 4 BE-Belgium                                   48.9     17.6  1115\n 5 BG-Bulgaria                                  49.1     17.2  1000\n 6 CL-Chile                                     46.6     17.6  1505\n 7 CN-China                                     43.0     14.1  3010\n 8 TW-Taiwan                                    44.8     16.6  2026\n 9 HR-Croatia                                   45.7     17.6  1201\n10 CY-Cyprus                                    42.6     15.4  1000\n11 CZ-Czech Republic                            46.8     16.8  1205\n12 DK-Denmark                                   50.2     17.0  1518\n13 EE-Estonia                                   50.9     18.8  1005\n14 FI-Finland                                   47.6     16.5   880\n15 FR-France                                    55.1     15.7  2817\n16 DE-Germany                                   49.6     17.9  1395\n17 HU-Hungary                                   46.2     15.9  1010\n18 IS-Iceland                                   46.1     17.3   947\n19 IL-Israel                                    43.5     17.5  1193\n20 IT-Italy                                     48.3     17.1  1084\n21 JP-Japan                                     49.2     17.6  1296\n22 KR-South Korea                               43.5     15.2  1599\n23 LV-Latvia                                    44.4     17.0  1069\n24 LT-Lithuania                                 51.5     18.4  1023\n25 NZ-New Zealand                               50.6     17.0   935\n26 NO-Norway                                    48       15.2  1246\n27 PH-Philippines                               42.5     16.1  1200\n28 PL-Poland                                    46.0     17.1  1263\n29 PT-Portugal                                  49.4     18.1  1000\n30 RU-Russia                                    46.8     18.4  1603\n31 SK-Slovakia                                  46.3     16.3  1159\n32 SI-Slovenia                                  46.7     17.8  1065\n33 ZA-South Africa                              39.3     15.7  3305\n34 ES-Spain                                     47.1     17.9  1215\n35 SE-Sweden                                    48.5     16.3  1137\n36 CH-Switzerland                               50.1     17.7  1229\n37 TR-Turkey                                    41.2     15.5  1569\n38 UA-Ukraine                                   48.2     17.7  2012\n39 GB-Great Britain and/or United Kingdom       50.1     17.2   958\n40 US-United States                             49.5     17.1  1581\n41 VE-Venezuela                                 36.8     15.1   969\n\n\nExploración gráfica\n\nbar_age=ggplot(issp2009r, \n               aes(reorder(to_label(v5), -meanage),meanage))\nbar_age + geom_bar(stat = \"summary\") + \n  coord_flip() +\n  theme(axis.text=element_text(size=5),\n        axis.title=element_text(size=10,face=\"bold\")) + \n  labs(x=\" \", y=\"Age \")\n\n\n\n\n\nbox_age= ggplot(issp2009r, \n                aes(reorder(to_label(v5), -meanage),age)) \nbox_age + geom_boxplot() +  \n  coord_flip() + \n  theme(axis.text=element_text(size=5),\n        axis.title=element_text(size=10,face=\"bold\")) + \n  labs(x=\" \", y=\"Age \")\n\n\n\n\n\n\n4 Preparación de datos externos de nivel 2\nPara esto usaremos la base del Quality of Government Indicators (QoG).\n\nqog=read_stata(\"https://multinivel-facso.netlify.app/assignment/data/qog_bas_ts_jan23_stata14.dta\")\n\nDimensiones de la base:\n\ndim(qog) \n\n[1] 15366   254\n\n\nTenemos 254 variables (columnas) para 15366 filas (países/años)\nYa que los países (cname) y años (year) se repiten en distintos momentos en el tiempo, veamos cuantos hay en total en la base:\n\nqog %&gt;% group_by(cname) %&gt;% summarise() # 204 países\n\n# A tibble: 204 × 1\n   cname              \n   &lt;chr&gt;              \n 1 Afghanistan        \n 2 Albania            \n 3 Algeria            \n 4 Andorra            \n 5 Angola             \n 6 Antigua and Barbuda\n 7 Argentina          \n 8 Armenia            \n 9 Australia          \n10 Austria            \n# ℹ 194 more rows\n\nqog %&gt;% group_by(year) %&gt;% summarise() # 77 años \n\n# A tibble: 77 × 1\n    year\n   &lt;dbl&gt;\n 1  1946\n 2  1947\n 3  1948\n 4  1949\n 5  1950\n 6  1951\n 7  1952\n 8  1953\n 9  1954\n10  1955\n# ℹ 67 more rows\n\n\nPara los análisis vamos ahora a extraer solo los datos del año 2009, que es el que corresponde al año de la encuesta ISSP analizada arriba y que luego serán combinados en una base única. Además vamos a seleccionar solo dos variables de la base qog: el índice de desigualdad Gini (wdi_gini), y la variable de identificación de países cname, que nos servirá luego para combinar con la base ISSP.\n\nqog2009 &lt;- qog %&gt;% \n  filter(year==2009) %&gt;% \n  select(wdi_gini,cname)\n\nDescripción de base 2009\n\ndim(qog2009)\n\n[1] 198   2\n\nqog2009 %&gt;% \n  group_by(cname) %&gt;% \n  na.omit() %&gt;% \n  summarise_all(mean)\n\n# A tibble: 75 × 2\n   cname                            wdi_gini\n   &lt;chr&gt;                               &lt;dbl&gt;\n 1 Argentina                            43.7\n 2 Armenia                              28  \n 3 Austria                              31.5\n 4 Belarus                              27.7\n 5 Belgium                              28.6\n 6 Bolivia (Plurinational State of)     49.2\n 7 Botswana                             60.5\n 8 Brazil                               53.7\n 9 Bulgaria                             33.8\n10 Burkina Faso                         39.8\n# ℹ 65 more rows\n\nnames(qog2009)\n\n[1] \"wdi_gini\" \"cname\"   \n\n\nCon esto tenemos nuestra base de datos con el indicador de desigualdad Gini y los países para el año 2009.\n\n\n5 Combinando bases de distintos niveles\nAhora, el procedimiento que combina las bases de datos individuales y grupales/agregadas corresponde a un “merge”, que como sabemos requiere un vector (variable) que identifique a las unidades de nivel 2 en ambas bases.\nAcá se pueden producir dos situaciones:\n\nambas bases identifican de la misma manera a las unidades de nivel 2, es decir, en ambas existe una columna que tiene el mismo nombre y donde cada código o nombre se corresponde de manera exacta entre ambas bases. Este es el caso más favorable y se puede proceder directamente a la combinación de las bases\nno existe un identificador único en ambas bases para las unidades de nivel 2. Por ejemplo, si son países, puede que estos se identifiquen por un código diferente, o que sus nombres en algunos casos se escriban distinto (ej: con/sin acento, distintos idiomas,etc). Si este es el caso, la opción más básica y trabajosa es la “manual”, es decir, generar una variable en alguna de las bases de datos a combinar que posea valores idénticos a los de la otra base de datos.\n\nVeamos qué sucede en nuestro ejemplo. En la base ISSP la variable de identificación de país es v5, que posee un código y un valor:\n\nissp2009r %&gt;% \n  group_by(\"Country\"=to_label(v5)) %&gt;% \n  summarise(\"Country code\"=mean(v5))\n\n# A tibble: 41 × 2\n   Country      `Country code`\n   &lt;fct&gt;                 &lt;dbl&gt;\n 1 AR-Argentina             32\n 2 AU-Australia             36\n 3 AT-Austria               40\n 4 BE-Belgium               56\n 5 BG-Bulgaria             100\n 6 CL-Chile                152\n 7 CN-China                156\n 8 TW-Taiwan               158\n 9 HR-Croatia              191\n10 CY-Cyprus               196\n# ℹ 31 more rows\n\n\nEn cuanto a la variable país en la base qog:\n\nqog2009 %&gt;% \n  group_by(\"Country\"=to_label(cname)) %&gt;% \n  summarise(\"Country code\"=mean(cname))\n\n# A tibble: 198 × 2\n   Country             `Country code`\n   &lt;chr&gt;                        &lt;dbl&gt;\n 1 Afghanistan                     NA\n 2 Albania                         NA\n 3 Algeria                         NA\n 4 Andorra                         NA\n 5 Angola                          NA\n 6 Antigua and Barbuda             NA\n 7 Argentina                       NA\n 8 Armenia                         NA\n 9 Australia                       NA\n10 Austria                         NA\n# ℹ 188 more rows\n\n\nEntonces, estamos en la situación desfavorable para hacer el merge de ambas bases: no hay un código ni nombre que se corresponda de manera exacta entre ambas.\nAlternativa 1: se puede generar una variable en la base qog que se corresponda con la variable v5 de la base ISSP:\n\nqog2009$v5=qog2009$cname\n\nUna vez generada la nueva variable v5 en qog, recodificar de acuerdo a ISSP. Vamos a hacer un ejemplo solo para los códigos de Argentina y Australia:\n\nqog2009$v5=rec(qog2009$cname, rec=\"Argentina=32;Australia=36\") # ... y así para todos\n  qog2009 %&gt;% group_by(v5) %&gt;%  select(v5,cname) %&gt;% slice(1:10)\n\n# A tibble: 12 × 2\n# Groups:   v5 [3]\n      v5 cname              \n   &lt;dbl&gt; &lt;chr&gt;              \n 1    32 Argentina          \n 2    36 Australia          \n 3    NA Afghanistan        \n 4    NA Albania            \n 5    NA Algeria            \n 6    NA Andorra            \n 7    NA Angola             \n 8    NA Antigua and Barbuda\n 9    NA Azerbaijan         \n10    NA Austria            \n11    NA Bahamas (the)      \n12    NA Bahrain            \n\n\nSe puede ver que Argentina y Australia ya tienen sus códigos en la variable V5 que son los mismos que en ISSP. Se podría entonces seguir recodificando todos los países hasta completar la variable y entonces se puede hacer el merge.\nAlternativa 2: en este caso tenemos otra posibilidad que nos ahorra la recodificación al trabajar con países. En R existe la librería countrycode, diseñada específicamente para estos casos. Para utilizarla, se requiere tener claro los formatos de las variables de input y de output. En este caso, el input es la variable que viene en la base de datos (nombre de los países en qog2009),y queremos el output con los códigos en que vienen los países en ISSP (v5).\nLa base ISSP (ver codebook) sigue el estandar ISO-3166 para los códigos y labels de los países, que es uno de los formatos tradicionales para codificar países. Este entonces es el output que queremos generar en la base qog2009 para luego realizar el merge.\n\npacman::p_load(countrycode)\nqog2009$v5=countrycode(qog2009$cname, 'country.name','iso3n') # iso3n es ISO-3,para detalles ver documentación librería ?countrycode\nqog2009 %&gt;% group_by(v5) %&gt;%  select(v5,cname) %&gt;% slice(1:10)\n\n# A tibble: 198 × 2\n# Groups:   v5 [195]\n      v5 cname              \n   &lt;dbl&gt; &lt;chr&gt;              \n 1     4 Afghanistan        \n 2     8 Albania            \n 3    12 Algeria            \n 4    20 Andorra            \n 5    24 Angola             \n 6    28 Antigua and Barbuda\n 7    31 Azerbaijan         \n 8    32 Argentina          \n 9    36 Australia          \n10    40 Austria            \n# ℹ 188 more rows\n\n\n(Se generan algunos warnings por países no transformados, tener en cuenta por si luego falta información).\nAhora que tenemos una variable identica para los países en ambas bases de datos, es posible realizar el merge de ambas bases:\n\ndata_tot &lt;- merge(issp2009r,qog2009,by=c(\"v5\"))\n\nPara ver el resultado\n\n  data_tot %&gt;% group_by(\"Country\"=cname) %&gt;% summarise(\"Country code\"=mean(v5),\"Gini\"=mean(wdi_gini)) \n\n# A tibble: 42 × 3\n   Country   `Country code`  Gini\n   &lt;chr&gt;              &lt;dbl&gt; &lt;dbl&gt;\n 1 Argentina             32  43.7\n 2 Australia             36  NA  \n 3 Austria               40  31.5\n 4 Belgium               56  28.6\n 5 Bulgaria             100  33.8\n 6 Chile                152  47  \n 7 China                156  NA  \n 8 Croatia              191  32.6\n 9 Cyprus               196  32.1\n10 Czechia              203  26.2\n# ℹ 32 more rows\n\n\nAtención: vemos que hay missings para algunos países en la variable Gini, probablemente porque para ese año no hay información del indicador, eventualmente se puede recurrir a otras fuentes de información para completar.\n\n\n6 Ejemplo de descriptivos\nEjemplo de gráfico descriptivo de asociación entre variables nivel 1 y nivel 2\nVamos a considerar la variable de esfuerzo (issp) según desigualdad (qog).\n\nnames(data_tot)\n\n [1] \"v5\"       \"v10\"      \"sex\"      \"age\"      \"effort\"   \"meanage\" \n [7] \"sdage\"    \"count\"    \"wdi_gini\" \"cname\"   \n\ndat_scat=data_tot %&gt;% group_by(v5) %&gt;% select(wdi_gini,effort) %&gt;% na.omit() %&gt;% summarise_all(mean)\nnames(dat_scat)\n\n[1] \"v5\"       \"wdi_gini\" \"effort\"  \n\nsjPlot::plot_scatter(dat_scat, wdi_gini,effort,\n            dot.labels = to_label(dat_scat$v5),\n            fit.line = \"lm\",\n            show.ci = TRUE\n            )\n\n\n\n\nPara identificar mejor los países, podemos también usar la librería countrycode y generar una variable que contenga los nombres de países abreviados en 3 letras (formato iso3c)\n\ndata_tot$country3=countrycode(data_tot$v5,'iso3n','iso3c')\n\ndat_scat2=data_tot %&gt;% group_by(country3) %&gt;% na.omit() %&gt;% \nselect(wdi_gini,effort,country3) %&gt;% summarise_all(mean)\n\nsjPlot::plot_scatter(dat_scat2, wdi_gini, effort,\n            dot.labels = to_label(dat_scat2$country3),\n            fit.line = \"lm\",\n            show.ci = TRUE\n            )\n\n\n\n\nYa con la base que posee variables de distintos niveles, es posible comenzar con el modelamiento multinivel.\n\n\n7 Foro"
  },
  {
    "objectID": "assignment/02-practico.html",
    "href": "assignment/02-practico.html",
    "title": "Práctica 2. Datos y estimaciones en dos niveles",
    "section": "",
    "text": "Preparar y manipular datos a distintos niveles y comprender la diferencia de estimaciones a distintos niveles."
  },
  {
    "objectID": "assignment/02-practico.html#objetivo-de-la-práctica",
    "href": "assignment/02-practico.html#objetivo-de-la-práctica",
    "title": "Práctica 2. Datos y estimaciones en dos niveles",
    "section": "",
    "text": "Preparar y manipular datos a distintos niveles y comprender la diferencia de estimaciones a distintos niveles."
  },
  {
    "objectID": "assignment/02-practico.html#seleccionar-variables-de-interes",
    "href": "assignment/02-practico.html#seleccionar-variables-de-interes",
    "title": "Práctica 2. Datos y estimaciones en dos niveles",
    "section": "Seleccionar variables de interes",
    "text": "Seleccionar variables de interes\n\nmlm=mlm %&gt;% select(minority,female,ses,mathach,size,sector,pracad,disclim,himinty,mnses,schoolid) %&gt;% as.data.frame()\ndim(mlm)\n\n[1] 7185   11\n\nhead(mlm) # Muestra los primeros 10 casos para cada variable\n\n  minority female    ses mathach size sector pracad disclim himinty     mnses\n1        0      1 -1.528   5.876  842      0   0.35   1.597       0 -0.434383\n2        0      1 -0.588  19.708  842      0   0.35   1.597       0 -0.434383\n3        0      0 -0.528  20.349  842      0   0.35   1.597       0 -0.434383\n4        0      0 -0.668   8.781  842      0   0.35   1.597       0 -0.434383\n5        0      0 -0.158  17.898  842      0   0.35   1.597       0 -0.434383\n6        0      0  0.022   4.583  842      0   0.35   1.597       0 -0.434383\n  schoolid\n1     1224\n2     1224\n3     1224\n4     1224\n5     1224\n6     1224\n\nsummary(mlm) # Descriptivos generales (evaluación de datos perdidos)\n\n    minority          female            ses               mathach      \n Min.   :0.0000   Min.   :0.0000   Min.   :-3.758000   Min.   :-2.832  \n 1st Qu.:0.0000   1st Qu.:0.0000   1st Qu.:-0.538000   1st Qu.: 7.275  \n Median :0.0000   Median :1.0000   Median : 0.002000   Median :13.131  \n Mean   :0.2747   Mean   :0.5282   Mean   : 0.000143   Mean   :12.748  \n 3rd Qu.:1.0000   3rd Qu.:1.0000   3rd Qu.: 0.602000   3rd Qu.:18.317  \n Max.   :1.0000   Max.   :1.0000   Max.   : 2.692000   Max.   :24.993  \n      size          sector           pracad          disclim       \n Min.   : 100   Min.   :0.0000   Min.   :0.0000   Min.   :-2.4160  \n 1st Qu.: 565   1st Qu.:0.0000   1st Qu.:0.3200   1st Qu.:-0.8170  \n Median :1016   Median :0.0000   Median :0.5300   Median :-0.2310  \n Mean   :1057   Mean   :0.4931   Mean   :0.5345   Mean   :-0.1319  \n 3rd Qu.:1436   3rd Qu.:1.0000   3rd Qu.:0.7000   3rd Qu.: 0.4600  \n Max.   :2713   Max.   :1.0000   Max.   :1.0000   Max.   : 2.7560  \n    himinty         mnses               schoolid   \n Min.   :0.00   Min.   :-1.1939460   Min.   :1224  \n 1st Qu.:0.00   1st Qu.:-0.3230000   1st Qu.:3020  \n Median :0.00   Median : 0.0320000   Median :5192  \n Mean   :0.28   Mean   : 0.0001434   Mean   :5278  \n 3rd Qu.:1.00   3rd Qu.: 0.3269123   3rd Qu.:7342  \n Max.   :1.00   Max.   : 0.8249825   Max.   :9586"
  },
  {
    "objectID": "assignment/02-practico.html#tabla-descriptiva-con-stargazer",
    "href": "assignment/02-practico.html#tabla-descriptiva-con-stargazer",
    "title": "Práctica 2. Datos y estimaciones en dos niveles",
    "section": "Tabla descriptiva con stargazer:",
    "text": "Tabla descriptiva con stargazer:\nstargazer posee tres opciones básicas de output: text, html o latex (defecto). Si se quiere ver el contenido directamente en formato txt en la consola de R con fines exploratorios, usar text. Si se quiere reportar luego via knitr a html cambiar a html, y si se quiere exportar a pdf cambiar a Latex. Recomendación general: dejar inicialmente como text hasta el reporte final de resultados, facilita la visualización en la consola y no requiere tener que compilar para ver el resultado (en el caso de trabajar con Rmarkdown)\n\nstargazer(mlm, title = \"Descriptivos generales\", type='text')\n\n\nDescriptivos generales\n=================================================\nStatistic   N     Mean    St. Dev.   Min    Max  \n-------------------------------------------------\nminority  7,185   0.275     0.446     0      1   \nfemale    7,185   0.528     0.499     0      1   \nses       7,185  0.0001     0.779   -3.758 2.692 \nmathach   7,185  12.748     6.878   -2.832 24.993\nsize      7,185 1,056.862  604.172   100   2,713 \nsector    7,185   0.493     0.500     0      1   \npracad    7,185   0.534     0.251   0.000  1.000 \ndisclim   7,185  -0.132     0.944   -2.416 2.756 \nhiminty   7,185   0.280     0.449     0      1   \nmnses     7,185  0.0001     0.414   -1.194 0.825 \nschoolid  7,185 5,277.898 2,499.578 1,224  9,586 \n-------------------------------------------------\n\n\n\ny con html…\n\nstargazer(mlm, title = \"Descriptivos generales\", type='html')\n\n\n\nDescriptivos generales\n\n\n\n\n\n\n\nStatistic\n\n\nN\n\n\nMean\n\n\nSt. Dev.\n\n\nMin\n\n\nMax\n\n\n\n\n\n\n\n\nminority\n\n\n7,185\n\n\n0.275\n\n\n0.446\n\n\n0\n\n\n1\n\n\n\n\nfemale\n\n\n7,185\n\n\n0.528\n\n\n0.499\n\n\n0\n\n\n1\n\n\n\n\nses\n\n\n7,185\n\n\n0.0001\n\n\n0.779\n\n\n-3.758\n\n\n2.692\n\n\n\n\nmathach\n\n\n7,185\n\n\n12.748\n\n\n6.878\n\n\n-2.832\n\n\n24.993\n\n\n\n\nsize\n\n\n7,185\n\n\n1,056.862\n\n\n604.172\n\n\n100\n\n\n2,713\n\n\n\n\nsector\n\n\n7,185\n\n\n0.493\n\n\n0.500\n\n\n0\n\n\n1\n\n\n\n\npracad\n\n\n7,185\n\n\n0.534\n\n\n0.251\n\n\n0.000\n\n\n1.000\n\n\n\n\ndisclim\n\n\n7,185\n\n\n-0.132\n\n\n0.944\n\n\n-2.416\n\n\n2.756\n\n\n\n\nhiminty\n\n\n7,185\n\n\n0.280\n\n\n0.449\n\n\n0\n\n\n1\n\n\n\n\nmnses\n\n\n7,185\n\n\n0.0001\n\n\n0.414\n\n\n-1.194\n\n\n0.825\n\n\n\n\nschoolid\n\n\n7,185\n\n\n5,277.898\n\n\n2,499.578\n\n\n1,224\n\n\n9,586\n\n\n\n\n\n\n\n\n::: Para que se pueda obtener la tabla en html se debe agregar en las opciones del chunk en R results='asis' :::\nDatos perdidos: crear una nueva base sin missing values (Listwise Deletion) (solo recomendado para objetos que contienen las variables a incluir en el modelo)\n\nmlm2=na.omit(mlm) #Sacar missing data\nnames(mlm2)\nsummary(mlm2)"
  },
  {
    "objectID": "assignment/02-practico.html#exploración-visual-de-datos",
    "href": "assignment/02-practico.html#exploración-visual-de-datos",
    "title": "Práctica 2. Datos y estimaciones en dos niveles",
    "section": "Exploración visual de datos",
    "text": "Exploración visual de datos\n\nhist(mlm$mathach, xlim = c(0,30))\n\n\n\n\n\nsummary(mlm$mathach)\n\n   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. \n -2.832   7.275  13.131  12.748  18.317  24.993 \n\nscatterplot(mlm$mathach ~ mlm$ses, data=mlm, xlab=\"SES\", ylab=\"Math Score\", main=\"Math on SES\", smooth=FALSE)"
  },
  {
    "objectID": "assignment/02-practico.html#matriz-de-correlaciones-de-un-subset-de-variables",
    "href": "assignment/02-practico.html#matriz-de-correlaciones-de-un-subset-de-variables",
    "title": "Práctica 2. Datos y estimaciones en dos niveles",
    "section": "Matriz de correlaciones de un subset de variables",
    "text": "Matriz de correlaciones de un subset de variables\n\ncormat=mlm %&gt;% select(mathach,ses,sector,size) %&gt;% cor()\nround(cormat, digits=2)\n\n        mathach   ses sector  size\nmathach    1.00  0.36   0.20 -0.05\nses        0.36  1.00   0.19 -0.07\nsector     0.20  0.19   1.00 -0.42\nsize      -0.05 -0.07  -0.42  1.00\n\ncorrplot.mixed(cormat)"
  },
  {
    "objectID": "assignment/02-practico.html#nivel-1",
    "href": "assignment/02-practico.html#nivel-1",
    "title": "Práctica 2. Datos y estimaciones en dos niveles",
    "section": "Nivel 1",
    "text": "Nivel 1\n\nreg1&lt;- lm(mathach~1, data=mlm)\nreg2&lt;- lm(mathach~ses, data=mlm)\nreg3&lt;- lm(mathach~ses+female, data=mlm)\nreg4&lt;- lm(mathach~ses+female+sector, data=mlm)\nreg5&lt;- lm(mathach~ses+female+sector+minority, data=mlm)\nsummary(reg5)\n\n\nCall:\nlm(formula = mathach ~ ses + female + sector + minority, data = mlm)\n\nResiduals:\n     Min       1Q   Median       3Q      Max \n-20.2286  -4.5076   0.2104   4.7472  17.8078 \n\nCoefficients:\n            Estimate Std. Error t value Pr(&gt;|t|)    \n(Intercept) 13.24158    0.13386  98.924   &lt;2e-16 ***\nses          2.36392    0.09946  23.768   &lt;2e-16 ***\nfemale      -1.42166    0.14608  -9.732   &lt;2e-16 ***\nsector       2.25492    0.14906  15.127   &lt;2e-16 ***\nminority    -3.11239    0.17029 -18.277   &lt;2e-16 ***\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nResidual standard error: 6.166 on 7180 degrees of freedom\nMultiple R-squared:  0.1969,    Adjusted R-squared:  0.1965 \nF-statistic: 440.1 on 4 and 7180 DF,  p-value: &lt; 2.2e-16\n\n\n\nstargazer(reg5, title = \"Regresión datos individuales\", type='text')\n\n\nRegresión datos individuales\n===============================================\n                        Dependent variable:    \n                    ---------------------------\n                              mathach          \n-----------------------------------------------\nses                          2.364***          \n                              (0.099)          \n                                               \nfemale                       -1.422***         \n                              (0.146)          \n                                               \nsector                       2.255***          \n                              (0.149)          \n                                               \nminority                     -3.112***         \n                              (0.170)          \n                                               \nConstant                     13.242***         \n                              (0.134)          \n                                               \n-----------------------------------------------\nObservations                   7,185           \nR2                             0.197           \nAdjusted R2                    0.196           \nResidual Std. Error      6.166 (df = 7180)     \nF Statistic          440.111*** (df = 4; 7180) \n===============================================\nNote:               *p&lt;0.1; **p&lt;0.05; ***p&lt;0.01"
  },
  {
    "objectID": "assignment/02-practico.html#diagnóstico-de-residuos-con-librería-car",
    "href": "assignment/02-practico.html#diagnóstico-de-residuos-con-librería-car",
    "title": "Práctica 2. Datos y estimaciones en dos niveles",
    "section": "Diagnóstico de residuos (con librería car)",
    "text": "Diagnóstico de residuos (con librería car)\n\ninfluenceIndexPlot(reg5, vars=c(\"Cook\", \"Studentized\", \"hat\"), id.n=5)\n\n\n\ninfluencePlot(reg5, id.n=3) # el tama~no de los circulos se refiere a la D de Cook\n\n\n\n\n        StudRes          Hat        CookD\n869   2.6047540 0.0013831364 0.0018779316\n1629 -2.2407411 0.0020743123 0.0020861529\n3523 -3.2842968 0.0007451964 0.0016066368\n5321 -1.4359364 0.0035373357 0.0014636979\n6033 -0.1116449 0.0042083659 0.0000105369\n7136 -3.2099858 0.0007110209 0.0014644182"
  },
  {
    "objectID": "assignment/02-practico.html#generación-de-base-agregada",
    "href": "assignment/02-practico.html#generación-de-base-agregada",
    "title": "Práctica 2. Datos y estimaciones en dos niveles",
    "section": "Generación de base agregada",
    "text": "Generación de base agregada\n\nUsando la funcion group_by (agrupar por) de la librería dplyr\nSe agrupa por la variable cluster, que identifica a las unidades de nivel 2 (en este caso, schoolid)\nPor defecto se hace con el promedio, pero se pueden hacer otras funciones como contar, porcentajes, mediana, etc.\n\nPara ello:\n\ngeneramos el objeto agg_mlm desde el objeto mlm\nagrupando por la variable cluster schoolid\nagregamos (colapsamos) todas summarise_all por el promedio funs(mean)\n\n\nagg_mlm=mlm %&gt;% group_by(schoolid) %&gt;% summarise_all(funs(mean)) %&gt;% as.data.frame()\nstargazer(agg_mlm, type = \"text\")"
  },
  {
    "objectID": "assignment/02-practico.html#comparando-regresiones",
    "href": "assignment/02-practico.html#comparando-regresiones",
    "title": "Práctica 2. Datos y estimaciones en dos niveles",
    "section": "Comparando regresiones",
    "text": "Comparando regresiones\n\nreg5_agg&lt;- lm(mathach~ses+female+sector+minority, data=agg_mlm)\nstargazer(reg5,reg5_agg, title = \"Comparación de modelos\",column.labels=c(\"Individual\",\"Agregado\"), type ='text')\n\n\nComparación de modelos\n=====================================================================\n                                   Dependent variable:               \n                    -------------------------------------------------\n                                         mathach                     \n                           Individual                Agregado        \n                               (1)                      (2)          \n---------------------------------------------------------------------\nses                         2.364***                 4.204***        \n                             (0.099)                  (0.418)        \n                                                                     \nfemale                      -1.422***                -1.997***       \n                             (0.146)                  (0.532)        \n                                                                     \nsector                      2.255***                 1.635***        \n                             (0.149)                  (0.302)        \n                                                                     \nminority                    -3.112***                -2.343***       \n                             (0.170)                  (0.534)        \n                                                                     \nConstant                    13.242***                13.613***       \n                             (0.134)                  (0.347)        \n                                                                     \n---------------------------------------------------------------------\nObservations                  7,185                     160          \nR2                            0.197                    0.711         \nAdjusted R2                   0.196                    0.703         \nResidual Std. Error     6.166 (df = 7180)        1.699 (df = 155)    \nF Statistic         440.111*** (df = 4; 7180) 95.124*** (df = 4; 155)\n=====================================================================\nNote:                                     *p&lt;0.1; **p&lt;0.05; ***p&lt;0.01\n\n\n¿Qué diferencias existen entre ambas estimaciones? ¿Qué problemas o sesgos podría ocasionar el realizar estimaciones paralelamente en dos niveles?"
  },
  {
    "objectID": "assignment/01-practico.html",
    "href": "assignment/01-practico.html",
    "title": "Práctica 1. Preparación de datos en R",
    "section": "",
    "text": "El desarrollo de esta guía tiene por objetivo revisar algunos procedimientos básicos de la preparación de datos con R, que son necesarios para luego poder aplicar los contenidos más específicos de este curso. Originalmente fue desarrollado para el curso de Estadística Multivariada, disponible aquí\nPor temas de orden y reproducibilidad, en este curso vamos a separar en dos momentos el trabajo con datos, y dos archivos de código correspondientes:\n\nPreparación corresponde a lo que se conoce generalmente como “limpieza”, es decir, realizar las modificaciones necesarias para poder efectuar los análisis. Estas modificaciones previas al análisis son necesarias ya que los datos originales con los que se va a trabajar en general no vienen perfectamente adaptados a los análisis que se quieren hacer. Por lo tanto, en cuanto a datos también hacemos la distinción entre datos originales y datos preparados (o procesados).\nAnálisis: se relaciona tanto con análisis descriptivos asociados a las preguntas de investigación y como también modelamiento de datos para contrastar hipótesis de investigación.\n\n\n\n\nTanto la preparación como el análisis (que son parte del concepto más general de procesamiento) quedan registrados cada en un archivo de código. Los detalles de este tipo de archivos se pueden revisar aquí.\n\n\n\n\n\n\nArchivo de código R\n\n\n\nArchivo con extensión .R donde se almacena el código de análisis. Para generarlo desde RStudio: File &gt; New File &gt; R Script (o ctrl+shift+N), y para grabarlo File &gt; Save (o ctrl+s), y darle nombre la primera vez (recordar: sin tilde ni ñ, y evitar espacios)\n\n\nEl documento de código de preparación posee 5 partes, más una sección de identificación inicial:\n\nIdentificación y descripción general: Título, autor(es), fecha, información breve sobre el contenido del documento\nLibrerías: cargar librerías a utilizar\nDatos: carga de datos\nSelección de variables a utilizar\nProcesamiento de variables: en este punto, por cada variable se realiza lo siguiente:\n\nDescriptivo básico\nRecodificación: (datos perdidos y valores (en caso de ser necesario)\nEtiquetamiento: de variable y valores (en caso de ser necesario)\nOtros ajustes\n\nGeneración de base de datos preparada para el análisis.\n\nAl final de esta práctica la idea es que cada un_ elabore y entienda su propio documento de preparación de datos.\nEn el ejemplo vamos a procesar variables de meritocracia y estatus (objetivo y subjetivo) utilizando los datos de la encuesta ELSOC .\n\n\n\n\nEl Estudio Longitudinal Social de Chile (ELSOC) es una encuesta desarrollada para analizar longitudinalmente la evolución del conflicto y cohesión en la sociedad chilena.\nUno de los módulos de ELSOC es “Desigualdad y Legitimidad”. Este módulo busca estudiar las percepciones y atribuciones asociadas a las desigualdades sociales. Se ve motivado por el interés de comprender cómo las personas perciben, legitiman y reproducen las diferencias de ingresos, estatus y poder presentes en el Chile contemporáneo.\nEl presente ejercicio tiene por objetivo el procesar los datos para obtener las variables relevantes para el estudio de la Percepción de Meritocracia, entendida como el grado en que los individuos consideran que su sociedad cumple con los principios de una meritocracia, es decir, que funciona como un sistema que asigna recompensas en función del esfuerzo y las habilidades. Para ello, junto con variables de meritocracia, consideraremos también variables de estatus (educación y estatus subjetivo), y variables de caracterización sociodemográfica (sexo y edad)."
  },
  {
    "objectID": "assignment/01-practico.html#objetivo-de-la-práctica",
    "href": "assignment/01-practico.html#objetivo-de-la-práctica",
    "title": "Práctica 1. Preparación de datos en R",
    "section": "",
    "text": "El desarrollo de esta guía tiene por objetivo revisar algunos procedimientos básicos de la preparación de datos con R, que son necesarios para luego poder aplicar los contenidos más específicos de este curso. Originalmente fue desarrollado para el curso de Estadística Multivariada, disponible aquí\nPor temas de orden y reproducibilidad, en este curso vamos a separar en dos momentos el trabajo con datos, y dos archivos de código correspondientes:\n\nPreparación corresponde a lo que se conoce generalmente como “limpieza”, es decir, realizar las modificaciones necesarias para poder efectuar los análisis. Estas modificaciones previas al análisis son necesarias ya que los datos originales con los que se va a trabajar en general no vienen perfectamente adaptados a los análisis que se quieren hacer. Por lo tanto, en cuanto a datos también hacemos la distinción entre datos originales y datos preparados (o procesados).\nAnálisis: se relaciona tanto con análisis descriptivos asociados a las preguntas de investigación y como también modelamiento de datos para contrastar hipótesis de investigación.\n\n\n\n\nTanto la preparación como el análisis (que son parte del concepto más general de procesamiento) quedan registrados cada en un archivo de código. Los detalles de este tipo de archivos se pueden revisar aquí.\n\n\n\n\n\n\nArchivo de código R\n\n\n\nArchivo con extensión .R donde se almacena el código de análisis. Para generarlo desde RStudio: File &gt; New File &gt; R Script (o ctrl+shift+N), y para grabarlo File &gt; Save (o ctrl+s), y darle nombre la primera vez (recordar: sin tilde ni ñ, y evitar espacios)\n\n\nEl documento de código de preparación posee 5 partes, más una sección de identificación inicial:\n\nIdentificación y descripción general: Título, autor(es), fecha, información breve sobre el contenido del documento\nLibrerías: cargar librerías a utilizar\nDatos: carga de datos\nSelección de variables a utilizar\nProcesamiento de variables: en este punto, por cada variable se realiza lo siguiente:\n\nDescriptivo básico\nRecodificación: (datos perdidos y valores (en caso de ser necesario)\nEtiquetamiento: de variable y valores (en caso de ser necesario)\nOtros ajustes\n\nGeneración de base de datos preparada para el análisis.\n\nAl final de esta práctica la idea es que cada un_ elabore y entienda su propio documento de preparación de datos.\nEn el ejemplo vamos a procesar variables de meritocracia y estatus (objetivo y subjetivo) utilizando los datos de la encuesta ELSOC ."
  },
  {
    "objectID": "assignment/01-practico.html#antecedentes-de-los-datos-a-utilizar",
    "href": "assignment/01-practico.html#antecedentes-de-los-datos-a-utilizar",
    "title": "Práctica 1. Preparación de datos en R",
    "section": "",
    "text": "El Estudio Longitudinal Social de Chile (ELSOC) es una encuesta desarrollada para analizar longitudinalmente la evolución del conflicto y cohesión en la sociedad chilena.\nUno de los módulos de ELSOC es “Desigualdad y Legitimidad”. Este módulo busca estudiar las percepciones y atribuciones asociadas a las desigualdades sociales. Se ve motivado por el interés de comprender cómo las personas perciben, legitiman y reproducen las diferencias de ingresos, estatus y poder presentes en el Chile contemporáneo.\nEl presente ejercicio tiene por objetivo el procesar los datos para obtener las variables relevantes para el estudio de la Percepción de Meritocracia, entendida como el grado en que los individuos consideran que su sociedad cumple con los principios de una meritocracia, es decir, que funciona como un sistema que asigna recompensas en función del esfuerzo y las habilidades. Para ello, junto con variables de meritocracia, consideraremos también variables de estatus (educación y estatus subjetivo), y variables de caracterización sociodemográfica (sexo y edad)."
  },
  {
    "objectID": "assignment/01-practico.html#librerias",
    "href": "assignment/01-practico.html#librerias",
    "title": "Práctica 1. Preparación de datos en R",
    "section": "1. Librerías principales (de R) a utilizar en el análisis",
    "text": "1. Librerías principales (de R) a utilizar en el análisis\nComo sabemos, la lógica de R es instalar librerías (solo 1 vez, con install.packages(\"librería\")), y luego cargarlas cada vez que es necesario usarlas (con library(librería)). El problema de esto es que a veces no se sabe claramente qué librerías están instaladas y cuales no, lo que va a arrojar error al cargarlas. Y, como sucede en R, existe una librería para solucionar este problema que se llama pacman (package manager). Lo que hace pacman es cargar la librería, y si no está instalada, la instala y la carga.\nPara utilizar la primera vez (si es que no está instalada):\n\ninstall.packages(\"pacman\")\n\nY en adelante, las librerías se cargan así:\n\n pacman::p_load(libreria1,libreria2,libreriaX)\n\nPara esta sesión vamos a utilizar Las librerías que vamos a utilizar son:\n\ndplyr: ajuste general de datos\nsjmisc: descripción y exploración de base de datos\ncar: principalmente la función recode para recodificar/agrupar valores de variable\nsjlabelled: para funciones específicas con datos etiquetados\nstargazer: para tabla descriptiva\nhaven: para abrir bases de datos en distintos formatos\n\n\npacman::p_load(dplyr, sjmisc, car, sjlabelled, stargazer)"
  },
  {
    "objectID": "assignment/01-practico.html#cargar-base-de-datos",
    "href": "assignment/01-practico.html#cargar-base-de-datos",
    "title": "Práctica 1. Preparación de datos en R",
    "section": "2. Cargar base de datos",
    "text": "2. Cargar base de datos\nAjustar espacio de trabajo\nPrevio a la carga de nuestra base de datos, se recomienda ejecutar los siguientes comandos:\n\nrm(list=ls())       # borrar todos los objetos en el espacio de trabajo\noptions(scipen=999) # valores sin notación científica\n\nLa función rm(list=ls()) permite comenzar con un espacio de trabajo (environment) vacío y sin otros objetos. Así también, la función options(scipen=999) desactiva la notación científica, es decir, veremos los valores numéricos con todos sus decimales.\nDatos\nLas bases de datos se pueden cargar de un archivo local o en línea. Para este caso utilizaremos un archivo en línea que viene en formato RData: ELSOC_W01_v3.10.RData.\n\n\n\n\n\n\nAbrir bases de datos en otros formatos**\n\n\n\nLos formatos mas comunes en que se almacenan las bases de datos son .dta (Stata) y .sav (Spss). Para abrir desde R utlilizamos la librería haven y sus funciones read_dta y read_sav según corresponda. Ej: datos &lt;- read_dta(\"base_casen.dta\"). Recordar antes instalar/cargar la librería: pacman::p_load(haven)\n\n\nCargamos la base de datos desde internet\n\nload(url(\"https://multivariada.netlify.com/assignment/data/original/ELSOC_W01_v3.10.RData\"))\n\nLa base de datos aparece como un objeto en nuestro espacio de trabajo, con el nombre original con la que fue guardada (elsoc_2016):\n\nRealizamos un chequeo básico de la lectura de datos: nombres de las variables y tamaño de la base en términos de casos y variables (en este ejemplo, 2927 casos y 383 variables).\n\ndim(elsoc_2016) # dimension de la base\n\n[1] 2927  383\n\n\nY si se quiere revisar en formato de planilla de datos:\n\nView(elsoc_2016)"
  },
  {
    "objectID": "assignment/01-practico.html#selección-de-variables-a-utilizar",
    "href": "assignment/01-practico.html#selección-de-variables-a-utilizar",
    "title": "Práctica 1. Preparación de datos en R",
    "section": "3. Selección de variables a utilizar",
    "text": "3. Selección de variables a utilizar\nEste paso consiste en crear un subset reducido de datos que contenga solo las variables de interés. Para ello:\n\nSe identifica el nombre de las variables que registran la información de preguntas o items del instrumento: esto aparece en el libro de códigos y/o en el cuestionario, o también se puede hacer buscando en la base de datos mediante alguna palabra clave asociada a la pregunta. Por ejemplo, si queremos buscar variables asociadas a educación, utilizamos la función find_var (de sjmisc, librería que cargamos en el paso 1), que nos entrega nombre de la variable en columna var.name. Por ejemplo, si buscamos alguna variable asociada al concepto esfuerzo:\n\n\nfind_var(data = elsoc_2016,\"esfuerzo\")\n\n  col.nr var.name\n1    158   c18_09\n                                                           var.label\n1 Grado de acuerdo: Las personas son recompensadas por sus esfuerzos\n\n\nNos informa que esta variable es la c18_09.\nMediante la función select de dplyr, seleccionamos cada una de nuestras variables de interés y creamos una nueva base con el nombre proc_elsoc, donde “proc” hace referencia a base procesada:\n\nproc_elsoc &lt;- elsoc_2016 %&gt;% select(c18_09, # percepción meritocracia esfuerzo\n                          c18_10, # percepción meritocracia talento\n                          d01_01, # estatus social subjetivo\n                          m01,    # nivel educacional\n                          m0_sexo,# sexo\n                          m0_edad)# edad\n\n# Comprobar\nnames(proc_elsoc)\n\n[1] \"c18_09\"  \"c18_10\"  \"d01_01\"  \"m01\"     \"m0_sexo\" \"m0_edad\"\n\n\nMediante el comando get_label obtenemos el atributo label de las variables.\n\nsjlabelled::get_label(proc_elsoc)\n\n                                                                  c18_09 \n    \"Grado de acuerdo: Las personas son recompensadas por sus esfuerzos\" \n                                                                  c18_10 \n   \"Grado de acuerdo: Las personas son recompensada por su inteligencia\" \n                                                                  d01_01 \n\"Estatus Social Subjetivo: Donde se ubicaria ud. en la sociedad chilena\" \n                                                                     m01 \n                                                     \"Nivel educacional\" \n                                                                 m0_sexo \n                                                 \"Sexo del entrevistado\" \n                                                                 m0_edad \n                                                 \"Edad del entrevistado\" \n\n\nPodemos ver que son muy largas, por lo tanto, es necesario cambiarlas por etiquetas más cortas."
  },
  {
    "objectID": "assignment/01-practico.html#procesamiento-de-variables",
    "href": "assignment/01-practico.html#procesamiento-de-variables",
    "title": "Práctica 1. Preparación de datos en R",
    "section": "4. Procesamiento de variables",
    "text": "4. Procesamiento de variables\nPara el procesamiento de cada variable se seguirá el siguiente flujo de trabajo:\n\nDescriptivo general\nRecodificación: de casos perdidos y otros valores (en caso necesario)\nEtiquetado: cambio de nombres de variables y valores (en caso necesario)\nOtros ajustes\n\nY se recomienda también un descriptivo final para revisar que el procesamiento de cada variable está ok.\n\n4.1 Percepción de meritocracia\nEn ELSOC, las variables que permiten medir la percepción de las personas con respecto al funcionamiento de la meritocracia en Chile son las siguientes:\n\n[c18_09]: “Grado de acuerdo: Las personas son recompensadas por sus esfuerzos” (1 = Totalmente en desacuerdo; 5 = Totalmente de acuerdo)\n[c18_10]: “Grado de acuerdo: Las personas son recompensadas por su inteligencia” (1 = Totalmente en desacuerdo; 5 = Totalmente de acuerdo)\n\na. Descriptivo\nPara los descriptivos se utilizará la función frq, de la librería sjmisc:\n\nfrq(proc_elsoc$c18_09)\n\nGrado de acuerdo: Las personas son recompensadas por sus esfuerzos (x) &lt;numeric&gt; \n# total N=2927 valid N=2927 mean=-3.06 sd=71.66\n\nValue |                          Label |    N | Raw % | Valid % | Cum. %\n------------------------------------------------------------------------\n -999 |          No Responde (no leer) |    4 |  0.14 |    0.14 |   0.14\n -888 |              No Sabe (no leer) |   14 |  0.48 |    0.48 |   0.61\n    1 |       Totalmente en desacuerdo |  357 | 12.20 |   12.20 |  12.81\n    2 |                  En desacuerdo | 1331 | 45.47 |   45.47 |  58.28\n    3 | Ni de acuerdo ni en desacuerdo |  497 | 16.98 |   16.98 |  75.26\n    4 |                     De acuerdo |  646 | 22.07 |   22.07 |  97.34\n    5 |          Totalmente de acuerdo |   78 |  2.66 |    2.66 | 100.00\n &lt;NA&gt; |                           &lt;NA&gt; |    0 |  0.00 |    &lt;NA&gt; |   &lt;NA&gt;\n\nfrq(proc_elsoc$c18_10)\n\nGrado de acuerdo: Las personas son recompensada por su inteligencia (x) &lt;numeric&gt; \n# total N=2927 valid N=2927 mean=-3.42 sd=74.36\n\nValue |                          Label |    N | Raw % | Valid % | Cum. %\n------------------------------------------------------------------------\n -999 |          No Responde (no leer) |    2 |  0.07 |    0.07 |   0.07\n -888 |              No Sabe (no leer) |   18 |  0.61 |    0.61 |   0.68\n    1 |       Totalmente en desacuerdo |  288 |  9.84 |    9.84 |  10.52\n    2 |                  En desacuerdo | 1163 | 39.73 |   39.73 |  50.26\n    3 | Ni de acuerdo ni en desacuerdo |  559 | 19.10 |   19.10 |  69.35\n    4 |                     De acuerdo |  814 | 27.81 |   27.81 |  97.16\n    5 |          Totalmente de acuerdo |   83 |  2.84 |    2.84 | 100.00\n &lt;NA&gt; |                           &lt;NA&gt; |    0 |  0.00 |    &lt;NA&gt; |   &lt;NA&gt;\n\n\nEn ambas variables vemos valores asociados a la opción “No responde” (-999) y “No sabe” (-888), que corresponde definirlos como casos perdidos (en el caso de R, como casos NA). El resto de los valores y etiquetas se encuentran en orden, así que en la recodificiación solo nos haremos cargo de los casos perdidos.\nb. Recodificación\nPara recodificar utilizamos la función recode, de la librería car\n\nproc_elsoc$c18_09 &lt;- recode(proc_elsoc$c18_09, \"c(-888,-999)=NA\")\nproc_elsoc$c18_10 &lt;- recode(proc_elsoc$c18_10, \"c(-888,-999)=NA\")\n\nc - Etiquetado\nVamos a dar un nombre más sustantivo a las variables con la función rename, de la librería dplyr:\n\nproc_elsoc &lt;- proc_elsoc %&gt;% rename(\"mesfuerzo\"=c18_09, # meritocracia esfuerzo\n                                    \"mtalento\" =c18_10) # meritocracia talento\n\nAdemás de cambiar el nombre, queremos cambiar la etiqueta de la variable.\n\nget_label(proc_elsoc$mesfuerzo)\n\n[1] \"Grado de acuerdo: Las personas son recompensadas por sus esfuerzos\"\n\nproc_elsoc$mesfuerzo &lt;- set_label(x = proc_elsoc$mesfuerzo,label = \"Recompensa: esfuerzo\")\n\nget_label(proc_elsoc$mtalento)\n\n[1] \"Grado de acuerdo: Las personas son recompensada por su inteligencia\"\n\nproc_elsoc$mtalento  &lt;- set_label(x = proc_elsoc$mtalento, label = \"Recompensa: talento\")\n\nd. Otros ajustes\nPara este caso vamos a crear una variable que sea el promedio de los dos items de meritocracia.\n\nproc_elsoc$pmerit &lt;- (proc_elsoc$mesfuerzo+proc_elsoc$mtalento)/2\nsummary(proc_elsoc$pmerit)\n\n   Min. 1st Qu.  Median    Mean 3rd Qu.    Max.    NA's \n  1.000   2.000   2.500   2.654   3.500   5.000      29 \n\n\n\nget_label(proc_elsoc$pmerit)\n\n[1] \"Recompensa: esfuerzo\"\n\n\nVemos que todavía tiene la etiqueta de la variable “Recompensa: esfuerzo”\n\nproc_elsoc$pmerit  &lt;- set_label(x = proc_elsoc$pmerit, label = \"Meritocracia promedio\")\n\nRevisión final\nNuevamente un descriptivo de cada variable para confirmar que el procesamiento está ok:\n\nfrq(proc_elsoc$mesfuerzo)\n\nRecompensa: esfuerzo (x) &lt;numeric&gt; \n# total N=2927 valid N=2909 mean=2.57 sd=1.05\n\nValue |                          Label |    N | Raw % | Valid % | Cum. %\n------------------------------------------------------------------------\n -999 |          No Responde (no leer) |    0 |  0.00 |    0.00 |   0.00\n -888 |              No Sabe (no leer) |    0 |  0.00 |    0.00 |   0.00\n    1 |       Totalmente en desacuerdo |  357 | 12.20 |   12.27 |  12.27\n    2 |                  En desacuerdo | 1331 | 45.47 |   45.75 |  58.03\n    3 | Ni de acuerdo ni en desacuerdo |  497 | 16.98 |   17.08 |  75.11\n    4 |                     De acuerdo |  646 | 22.07 |   22.21 |  97.32\n    5 |          Totalmente de acuerdo |   78 |  2.66 |    2.68 | 100.00\n &lt;NA&gt; |                           &lt;NA&gt; |   18 |  0.61 |    &lt;NA&gt; |   &lt;NA&gt;\n\nfrq(proc_elsoc$mtalento)\n\nRecompensa: talento (x) &lt;numeric&gt; \n# total N=2927 valid N=2907 mean=2.74 sd=1.06\n\nValue |                          Label |    N | Raw % | Valid % | Cum. %\n------------------------------------------------------------------------\n -999 |          No Responde (no leer) |    0 |  0.00 |    0.00 |   0.00\n -888 |              No Sabe (no leer) |    0 |  0.00 |    0.00 |   0.00\n    1 |       Totalmente en desacuerdo |  288 |  9.84 |    9.91 |   9.91\n    2 |                  En desacuerdo | 1163 | 39.73 |   40.01 |  49.91\n    3 | Ni de acuerdo ni en desacuerdo |  559 | 19.10 |   19.23 |  69.14\n    4 |                     De acuerdo |  814 | 27.81 |   28.00 |  97.14\n    5 |          Totalmente de acuerdo |   83 |  2.84 |    2.86 | 100.00\n &lt;NA&gt; |                           &lt;NA&gt; |   20 |  0.68 |    &lt;NA&gt; |   &lt;NA&gt;\n\nfrq(proc_elsoc$pmerit)\n\nMeritocracia promedio (x) &lt;numeric&gt; \n# total N=2927 valid N=2898 mean=2.65 sd=0.97\n\n  Value |                          Label |    N | Raw % | Valid % | Cum. %\n--------------------------------------------------------------------------\n-999.00 |          No Responde (no leer) |    0 |  0.00 |    0.00 |   0.00\n-888.00 |              No Sabe (no leer) |    0 |  0.00 |    0.00 |   0.00\n   1.00 |       Totalmente en desacuerdo |  243 |  8.30 |    8.39 |   8.39\n   1.50 |                            1.5 |   79 |  2.70 |    2.73 |  11.11\n   2.00 |                  En desacuerdo | 1041 | 35.57 |   35.92 |  47.03\n   2.50 |                            2.5 |  222 |  7.58 |    7.66 |  54.69\n   3.00 | Ni de acuerdo ni en desacuerdo |  536 | 18.31 |   18.50 |  73.19\n   3.50 |                            3.5 |  169 |  5.77 |    5.83 |  79.02\n   4.00 |                     De acuerdo |  528 | 18.04 |   18.22 |  97.24\n   4.50 |                            4.5 |   38 |  1.30 |    1.31 |  98.55\n   5.00 |          Totalmente de acuerdo |   42 |  1.43 |    1.45 | 100.00\n   &lt;NA&gt; |                           &lt;NA&gt; |   29 |  0.99 |    &lt;NA&gt; |   &lt;NA&gt;\n\n\n\nSobre generación de índices: en este caso aplicamos un promedio simple de dos items, pero hay ciertas consideraciones adicionales a tener cuando existen casos perdidos y también cuando son más de 2 items. Para esto, revisar guía sobre índices y transformación de variables\n\n\n4.2. Educación\n\n[m01] = ¿Cuál es su nivel educacional? Indique el tipo de estudio actual (si estudia actualmente) o el último tipo aprobado (si no estudia actualmente).\n\na. Descriptivo\n\nfrq(proc_elsoc$m01)\n\nNivel educacional (x) &lt;numeric&gt; \n# total N=2927 valid N=2927 mean=4.57 sd=26.34\n\nValue |                                       Label |   N | Raw % | Valid % | Cum. %\n------------------------------------------------------------------------------------\n -999 |                       No Responde (no leer) |   2 |  0.07 |    0.07 |   0.07\n -888 |                           No Sabe (no leer) |   0 |  0.00 |    0.00 |   0.07\n    1 |                                Sin estudios |  37 |  1.26 |    1.26 |   1.33\n    2 |  Educacion Basica o Preparatoria incompleta | 322 | 11.00 |   11.00 |  12.33\n    3 |    Educacion Basica o Preparatoria completa | 297 | 10.15 |   10.15 |  22.48\n    4 |    Educacion Media o Humanidades incompleta | 394 | 13.46 |   13.46 |  35.94\n    5 |      Educacion Media o Humanidades completa | 857 | 29.28 |   29.28 |  65.22\n    6 |                 Tecnica Superior incompleta | 102 |  3.48 |    3.48 |  68.71\n    7 |                   Tecnica Superior completa | 381 | 13.02 |   13.02 |  81.72\n    8 |                    Universitaria incompleta | 186 |  6.35 |    6.35 |  88.08\n    9 |                      Universitaria completa | 303 | 10.35 |   10.35 |  98.43\n   10 | Estudios de posgrado (magister o doctorado) |  46 |  1.57 |    1.57 | 100.00\n &lt;NA&gt; |                                        &lt;NA&gt; |   0 |  0.00 |    &lt;NA&gt; |   &lt;NA&gt;\n\n\nb. Recodificación\n\nDatos perdidos:\n\n\nproc_elsoc$m01 &lt;- recode(proc_elsoc$m01, \"c(-888,-999)=NA\")\n\n\nValores\n\nRecodificación de acuerdo a las categorías CINE 2011 (UNESCO)\n1.  Sin estudios                                = [CINE 0   ] =  1\n2.  Educacion Basica o Preparatoria incompleta  = [CINE 0   ] =  1\n3.  Educacion Basica o Preparatoria completa    = [CINE 1,2 ] =  2\n4.  Educacion Media o Humanidades incompleta    = [CINE 3   ] =  3\n5.  Educacion Media o Humanidades completa      = [CINE 3   ] =  3\n6.  Tecnico Superior incompleta                 = [CINE 5   ] =  4\n7.  Tecnico Superior completa                   = [CINE 5   ] =  4\n8.  Universitaria incompleta                    = [CINE 6   ] =  5\n9.  Universitaria completa                      = [CINE 6   ] =  6\n10. Estudios de posgrado (magister o doctorado) = [CINE 7, 8] =  6\n\n# recodificacion usando funcion 'recode' de la libreria car\nproc_elsoc$m01 &lt;- car::recode(proc_elsoc$m01, \"c(1,2)=1; c(3)=2;c(4,5)=3;c(6,7)=4;c(8,9,10)=5\")\n\nComprobar con un nuevo descriptivo:\n\nfrq(proc_elsoc$m01)\n\nNivel educacional (x) &lt;numeric&gt; \n# total N=2927 valid N=2925 mean=3.18 sd=1.21\n\nValue |                                       Label |    N | Raw % | Valid % | Cum. %\n-------------------------------------------------------------------------------------\n -999 |                       No Responde (no leer) |    0 |  0.00 |    0.00 |   0.00\n -888 |                           No Sabe (no leer) |    0 |  0.00 |    0.00 |   0.00\n    1 |                                Sin estudios |  359 | 12.27 |   12.27 |  12.27\n    2 |  Educacion Basica o Preparatoria incompleta |  297 | 10.15 |   10.15 |  22.43\n    3 |    Educacion Basica o Preparatoria completa | 1251 | 42.74 |   42.77 |  65.20\n    4 |    Educacion Media o Humanidades incompleta |  483 | 16.50 |   16.51 |  81.71\n    5 |      Educacion Media o Humanidades completa |  535 | 18.28 |   18.29 | 100.00\n    6 |                 Tecnica Superior incompleta |    0 |  0.00 |    0.00 | 100.00\n    7 |                   Tecnica Superior completa |    0 |  0.00 |    0.00 | 100.00\n    8 |                    Universitaria incompleta |    0 |  0.00 |    0.00 | 100.00\n    9 |                      Universitaria completa |    0 |  0.00 |    0.00 | 100.00\n   10 | Estudios de posgrado (magister o doctorado) |    0 |  0.00 |    0.00 | 100.00\n &lt;NA&gt; |                                        &lt;NA&gt; |    2 |  0.07 |    &lt;NA&gt; |   &lt;NA&gt;\n\n\nSe observa que los valores coinciden con la recodificación (los casos se acumulan entre las categorías 1 y 5), pero las etiquetas ahora no coinciden; se soluciona en el siguiente paso.\nc. Etiquetado\nPara re-etiquetar valores usamos la función set_labels, de la librería sjlabelled\n\nproc_elsoc$m01 &lt;- set_labels(proc_elsoc$m01,\n            labels=c( \"Primaria incompleta menos\"=1,\n                      \"Primaria y secundaria baja\"=2,\n                      \"Secundaria alta\"=3,\n                      \"Terciaria ciclo corto\"=4,\n                      \"Terciaria y Postgrado\"=5))\n\nLuego renombramos la variable con un nombre más sustantivo\n\nproc_elsoc &lt;- rename(proc_elsoc,\"edcine\"=m01)\n\nAdemás de cambiar el nombre, queremos cambiar la etiqueta de la variable.\n\nget_label(proc_elsoc$edcine)\n\n[1] \"Nivel educacional\"\n\nproc_elsoc$edcine &lt;- set_label(x = proc_elsoc$edcine,label = \"Educación\")\n\n\n\n\n4.3. Estatus subjetivo\na. Descriptivo\n\n[d01_01]: “Estatus Social Subjetivo: Donde se ubicaria ud. en la sociedad chilena” (0 = el nivel mas bajo; 10 = el nivel mas alto)\n\n\nfrq(proc_elsoc$d01_01)\nsummary(proc_elsoc$d01_01)\n\nEstatus Social Subjetivo: Donde se ubicaria ud. en la sociedad chilena (x) &lt;numeric&gt; \n# total N=2927 valid N=2927 mean=0.63 sd=57.67\n\nValue |                 Label |   N | Raw % | Valid % | Cum. %\n--------------------------------------------------------------\n -999 | No Responde (no leer) |   1 |  0.03 |    0.03 |   0.03\n -888 |     No Sabe (no leer) |  11 |  0.38 |    0.38 |   0.41\n    0 |   0 El nivel mas bajo |  44 |  1.50 |    1.50 |   1.91\n    1 |                     1 |  84 |  2.87 |    2.87 |   4.78\n    2 |                     2 | 207 |  7.07 |    7.07 |  11.86\n    3 |                     3 | 439 | 15.00 |   15.00 |  26.85\n    4 |                     4 | 677 | 23.13 |   23.13 |  49.98\n    5 |                     5 | 975 | 33.31 |   33.31 |  83.29\n    6 |                     6 | 310 | 10.59 |   10.59 |  93.88\n    7 |                     7 | 116 |  3.96 |    3.96 |  97.85\n    8 |                     8 |  37 |  1.26 |    1.26 |  99.11\n    9 |                     9 |   4 |  0.14 |    0.14 |  99.25\n   10 |  10 El nivel mas alto |  22 |  0.75 |    0.75 | 100.00\n &lt;NA&gt; |                  &lt;NA&gt; |   0 |  0.00 |    &lt;NA&gt; |   &lt;NA&gt;\n     Min.   1st Qu.    Median      Mean   3rd Qu.      Max. \n-999.0000    3.0000    5.0000    0.6338    5.0000   10.0000 \n\n\nb. Recodificación\n\nproc_elsoc$d01_01 &lt;- recode(proc_elsoc$d01_01, \"c(-888,-999)=NA\")\n\nc. Etiquetado\n\nCambio de nombre de variable a etiqueta más sustantiva ess (estatus social subjetivo)\n\n\nproc_elsoc &lt;- proc_elsoc %&gt;% rename(\"ess\"=d01_01) # estatus social subjetivo\n\nAdemás de cambiar el nombre, queremos cambiar la etiqueta de la variable.\n\nget_label(proc_elsoc$ess)\n\n[1] \"Estatus Social Subjetivo: Donde se ubicaria ud. en la sociedad chilena\"\n\nproc_elsoc$ess &lt;- set_label(x = proc_elsoc$ess,label = \"Estatus Social Subjetivo\")\n\n\n\n4.4. Sexo\n\n[m0_sexo] = Indicar el sexo del entrevistado.\n\na. Descriptivo\n\nfrq(proc_elsoc$m0_sexo)\n\nSexo del entrevistado (x) &lt;numeric&gt; \n# total N=2927 valid N=2927 mean=1.60 sd=0.49\n\nValue |  Label |    N | Raw % | Valid % | Cum. %\n------------------------------------------------\n    1 | Hombre | 1163 | 39.73 |   39.73 |  39.73\n    2 |  Mujer | 1764 | 60.27 |   60.27 | 100.00\n &lt;NA&gt; |   &lt;NA&gt; |    0 |  0.00 |    &lt;NA&gt; |   &lt;NA&gt;\n\n\nb. Recodificación\nEn general esta variable no tiene problemas de casos perdidos ni de etiquetas, pero de todas maneras vamos a hacer un cambio de acuerdo a convenciones en análisis de datos, donde por lo general hombres tienen valor 0 y mujeres 1:\n\nproc_elsoc$m0_sexo &lt;- car::recode(proc_elsoc$m0_sexo, \"1=0;2=1\")\n\nc. Etiquetado\nY ahora cambiamos las etiquetas de acuerdo a la recodificación anterior:\n\nproc_elsoc$m0_sexo &lt;- set_labels(proc_elsoc$m0_sexo,\n            labels=c( \"Hombre\"=0,\n                      \"Mujer\"=1))\n\nTambién el nombre de la variable a algo más simple:\n\nproc_elsoc &lt;- rename(proc_elsoc,\"sexo\"=m0_sexo)\n\nAdemás de cambiar el nombre, queremos cambiar la etiqueta de la variable.\n\nget_label(proc_elsoc$sexo)\n\n[1] \"Sexo del entrevistado\"\n\nproc_elsoc$sexo &lt;- set_label(x = proc_elsoc$sexo,label = \"Sexo\")\n\nRevisar con un nuevo descriptivo:\n\nfrq(proc_elsoc$sexo)\n\nSexo (x) &lt;numeric&gt; \n# total N=2927 valid N=2927 mean=0.60 sd=0.49\n\nValue |  Label |    N | Raw % | Valid % | Cum. %\n------------------------------------------------\n    0 | Hombre | 1163 | 39.73 |   39.73 |  39.73\n    1 |  Mujer | 1764 | 60.27 |   60.27 | 100.00\n &lt;NA&gt; |   &lt;NA&gt; |    0 |  0.00 |    &lt;NA&gt; |   &lt;NA&gt;\n\n\n\n\n4.5 Edad\n\n[m0_edad] = ¿Cuáles su edad? (años cumplidos).\n\na. Descriptivo\n\nfrq(proc_elsoc$m0_edad)\n\nEdad del entrevistado (x) &lt;numeric&gt; \n# total N=2927 valid N=2927 mean=46.09 sd=15.29\n\nValue |                 Label |  N | Raw % | Valid % | Cum. %\n-------------------------------------------------------------\n -999 | No Responde (no leer) |  0 |  0.00 |    0.00 |   0.00\n -888 |     No Sabe (no leer) |  0 |  0.00 |    0.00 |   0.00\n   18 |                    18 | 19 |  0.65 |    0.65 |   0.65\n   19 |                    19 | 32 |  1.09 |    1.09 |   1.74\n   20 |                    20 | 26 |  0.89 |    0.89 |   2.63\n   21 |                    21 | 39 |  1.33 |    1.33 |   3.96\n   22 |                    22 | 49 |  1.67 |    1.67 |   5.64\n   23 |                    23 | 44 |  1.50 |    1.50 |   7.14\n   24 |                    24 | 51 |  1.74 |    1.74 |   8.88\n   25 |                    25 | 46 |  1.57 |    1.57 |  10.45\n   26 |                    26 | 44 |  1.50 |    1.50 |  11.96\n   27 |                    27 | 51 |  1.74 |    1.74 |  13.70\n   28 |                    28 | 58 |  1.98 |    1.98 |  15.68\n   29 |                    29 | 47 |  1.61 |    1.61 |  17.29\n   30 |                    30 | 66 |  2.25 |    2.25 |  19.54\n   31 |                    31 | 48 |  1.64 |    1.64 |  21.18\n   32 |                    32 | 64 |  2.19 |    2.19 |  23.37\n   33 |                    33 | 55 |  1.88 |    1.88 |  25.25\n   34 |                    34 | 55 |  1.88 |    1.88 |  27.13\n   35 |                    35 | 67 |  2.29 |    2.29 |  29.42\n   36 |                    36 | 70 |  2.39 |    2.39 |  31.81\n   37 |                    37 | 46 |  1.57 |    1.57 |  33.38\n   38 |                    38 | 57 |  1.95 |    1.95 |  35.33\n   39 |                    39 | 37 |  1.26 |    1.26 |  36.59\n   40 |                    40 | 57 |  1.95 |    1.95 |  38.54\n   41 |                    41 | 58 |  1.98 |    1.98 |  40.52\n   42 |                    42 | 67 |  2.29 |    2.29 |  42.81\n   43 |                    43 | 54 |  1.84 |    1.84 |  44.65\n   44 |                    44 | 45 |  1.54 |    1.54 |  46.19\n   45 |                    45 | 53 |  1.81 |    1.81 |  48.00\n   46 |                    46 | 77 |  2.63 |    2.63 |  50.63\n   47 |                    47 | 56 |  1.91 |    1.91 |  52.55\n   48 |                    48 | 72 |  2.46 |    2.46 |  55.01\n   49 |                    49 | 53 |  1.81 |    1.81 |  56.82\n   50 |                    50 | 69 |  2.36 |    2.36 |  59.17\n   51 |                    51 | 55 |  1.88 |    1.88 |  61.05\n   52 |                    52 | 69 |  2.36 |    2.36 |  63.41\n   53 |                    53 | 57 |  1.95 |    1.95 |  65.36\n   54 |                    54 | 76 |  2.60 |    2.60 |  67.95\n   55 |                    55 | 72 |  2.46 |    2.46 |  70.41\n   56 |                    56 | 76 |  2.60 |    2.60 |  73.01\n   57 |                    57 | 53 |  1.81 |    1.81 |  74.82\n   58 |                    58 | 57 |  1.95 |    1.95 |  76.77\n   59 |                    59 | 44 |  1.50 |    1.50 |  78.27\n   60 |                    60 | 57 |  1.95 |    1.95 |  80.22\n   61 |                    61 | 33 |  1.13 |    1.13 |  81.35\n   62 |                    62 | 33 |  1.13 |    1.13 |  82.47\n   63 |                    63 | 49 |  1.67 |    1.67 |  84.15\n   64 |                    64 | 39 |  1.33 |    1.33 |  85.48\n   65 |                    65 | 60 |  2.05 |    2.05 |  87.53\n   66 |                    66 | 39 |  1.33 |    1.33 |  88.86\n   67 |                    67 | 39 |  1.33 |    1.33 |  90.19\n   68 |                    68 | 35 |  1.20 |    1.20 |  91.39\n   69 |                    69 | 32 |  1.09 |    1.09 |  92.48\n   70 |                    70 | 37 |  1.26 |    1.26 |  93.75\n   71 |                    71 | 29 |  0.99 |    0.99 |  94.74\n   72 |                    72 | 28 |  0.96 |    0.96 |  95.70\n   73 |                    73 | 42 |  1.43 |    1.43 |  97.13\n   74 |                    74 | 39 |  1.33 |    1.33 |  98.46\n   75 |                    75 | 37 |  1.26 |    1.26 |  99.73\n   77 |                    77 |  1 |  0.03 |    0.03 |  99.76\n   78 |                    78 |  3 |  0.10 |    0.10 |  99.86\n   80 |                    80 |  1 |  0.03 |    0.03 |  99.90\n   81 |                    81 |  1 |  0.03 |    0.03 |  99.93\n   88 |                    88 |  2 |  0.07 |    0.07 | 100.00\n &lt;NA&gt; |                  &lt;NA&gt; |  0 |  0.00 |    &lt;NA&gt; |   &lt;NA&gt;\n\n\nb. Recodificación: no es necesario en este caso\nc. Etiquetado\nCambio del nombre de la variable a algo más simple:\n\nproc_elsoc &lt;- rename(proc_elsoc,\"edad\"=m0_edad)\n\nAdemás de cambiar el nombre, queremos cambiar la etiqueta de la variable.\n\nget_label(proc_elsoc$edad)\n\n[1] \"Edad del entrevistado\"\n\nproc_elsoc$edad &lt;- set_label(x = proc_elsoc$edad,label = \"Edad\")\n\n\n\nRecodificación de variables y casos perdidos de un conjunto de variables: \n\nRecodificación\n\nEjemplo: queremos recodificar un conjunto de variables que están medidas en la misma escala (ej: likert 1 a 5 muy en desacuerdo a muy de acuerdo) y pasarlas a dos categorías, donde 1 a 3 es bajo y 4 a 5 es alto:\ndata_cohes &lt;-  data_cohes %&gt;% select(var1:var5) %&gt;%\n  rec(rec = \"1,2,3=1; 4,5=2\",\n  val.labels = c(\"bajo\", \"alto\"))\nEn este caso se generarán en la misma base nuevas variables dicotomizadas con el mismo nombre más un sufijo _r. Si alternativamente se quiere reemplazar la variable recodificada en la misma variable (no recomendado) entonces agregar la opción suffix = \"\"\n\nCasos perdidos\n\nEs muy común que una base de datos defina un mismo valor(es) para los casos perdidos, como por ejemplo -99. Para esto se puede utilizar la función set_na, por ejemplo :\ndata_cohes &lt;- data_cohes %&gt;%\n  set_na(pcohes01:pcohes12, na = c(-9:-1)) \ndonde pcohes01:pcohes12 establece el rango de variables en la base a ser recodificados, y en na= se establecen los valores que pasan a NA."
  },
  {
    "objectID": "assignment/01-practico.html#generación-de-base-de-datos-procesada-para-el-análisis",
    "href": "assignment/01-practico.html#generación-de-base-de-datos-procesada-para-el-análisis",
    "title": "Práctica 1. Preparación de datos en R",
    "section": "5. Generación de base de datos procesada para el análisis",
    "text": "5. Generación de base de datos procesada para el análisis\nAntes de guardar la base procesada, revisamos nuevamente todas las variables con una tabla descriptiva general mediante la función stargazer (de la librería homónima)\nPrimero vamos a reformatear el objeto proc_elsoc como base de datos (as.data.frame), paso necesario para que sea reconocido como tal por stargazer\n\nproc_elsoc &lt;-as.data.frame(proc_elsoc)\nstargazer(proc_elsoc, type=\"text\")\n\n\n===========================================\nStatistic   N    Mean  St. Dev.  Min   Max \n-------------------------------------------\nmesfuerzo 2,909 2.573   1.047     1     5  \nmtalento  2,907 2.739   1.060     1     5  \ness       2,915 4.330   1.567     0    10  \nedcine    2,925 3.184   1.207     1     5  \nsexo      2,927 0.603   0.489     0     1  \nedad      2,927 46.091  15.287   18    88  \npmerit    2,898 2.654   0.969   1.000 5.000\n-------------------------------------------\n\n\nSi se desea modificar las columnas que aparecen en la tabla se puede ocupar la opción summary.stat, donde se pueden especificar:\n\n“max” maximum\n“mean” mean\n“median” median\n“min” minimum\n“n” number of observations\n“p25” 25th percentile\n“p75” 75th percentile\n“sd” standard deviation\n\nPor ejemplo, si quiero una tabla solo con promedio, n, sd y p75: stargazer(data, type=\"text\", summary.stat = c(\"mean\", \"n\", \"sd\", \"p75\"))\n\nGuardar base de datos procesada: en carpeta local\n\n::: {.callout-tip}La ruta hacia su carpeta local si está trabajando en windows debería ser algo como “C:/Users/Lenovo/Clases/y aquí nombre del archivo a grabar:::\nEl comando para guardar es save:\n\nsave(proc_elsoc,file = \"[ruta hacia carpeta local en su computador]/ELSOC_ess_merit2016.RData\")\n\nEn este caso, seguimos una estructura de carpetas de datos, separando en una carpeta los datos originales, y en otra (proc) los datos procesados:\n\nsave(proc_elsoc,file = \"assignment/data/proc/ELSOC_ess_merit2016.RData\")\n\n\nDe rutas, estructura de carpetas y otros \n\nEncontrando la ruta a carpeta local: lo más fácil es crear la carpeta donde se desean guardar los datos desde el administrador de archivos del computador. Luego, posicionarse con el cursor sobre la carpeta y seleccionar “Propiedades”, en la ventana emergente debería aparecer la ruta hacia la carpeta en “Ubicación”. Copiar esa ruta y agregar al final el nombre de la carpeta (separada por slash)\nSobre los “slashes” (\\ o /): en la ruta las carpetas y el archivo final aparecen separados por slashes, que según el sistema utilizado pueden ser slash (/) o backslash (\\). En R por defecto se usa slash, pero en Windows backslash, por lo que si se usa Windows hay que reemplazarlos por backslash o también puede ser por un doble slash (//).\nPor temas de compatibilidad general, en las rutas se recomienda evitar tildes, eñes, espacios, mayúsculas y guiones bajos (_).\nEstructura de carpetas: para mantener el orden se sugiere seguir un protocolo de estructura de carpetas de proyecto, para lo que recomendamos el protocolo IPO, y que se adapta al flujo de trabajo presentado al principio de este práctico. Básicamente son tres carpetas: input, procesamiento, output. En la carpeta input crear la subcarpeta data-orig para guardar datos originales, y data-proc para los procesados. En procesamiento se guardan los archivos de código y en output las tablas y los gráficos."
  },
  {
    "objectID": "assignment/01-practico.html#video",
    "href": "assignment/01-practico.html#video",
    "title": "Práctica 1. Preparación de datos en R",
    "section": "Video",
    "text": "Video"
  },
  {
    "objectID": "assignment/03-practico.html",
    "href": "assignment/03-practico.html",
    "title": "Práctica 3. Estimación modelos multinivel con lmer en R",
    "section": "",
    "text": "En esta práctica:"
  },
  {
    "objectID": "assignment/03-practico.html#modelo-0-null-model",
    "href": "assignment/03-practico.html#modelo-0-null-model",
    "title": "Práctica 3. Estimación modelos multinivel con lmer en R",
    "section": "Modelo 0: Null model",
    "text": "Modelo 0: Null model\n\nresults_0 = lmer(mathach ~ 1 + (1 | schoolid), data = mlm)\nsummary(results_0)\n\nLinear mixed model fit by REML ['lmerMod']\nFormula: mathach ~ 1 + (1 | schoolid)\n   Data: mlm\n\nREML criterion at convergence: 47116.8\n\nScaled residuals: \n    Min      1Q  Median      3Q     Max \n-3.0631 -0.7539  0.0267  0.7606  2.7426 \n\nRandom effects:\n Groups   Name        Variance Std.Dev.\n schoolid (Intercept)  8.614   2.935   \n Residual             39.148   6.257   \nNumber of obs: 7185, groups:  schoolid, 160\n\nFixed effects:\n            Estimate Std. Error t value\n(Intercept)  12.6370     0.2444   51.71\n\nscreenreg(results_0) # de library texreg\n\n\n========================================\n                           Model 1      \n----------------------------------------\n(Intercept)                    12.64 ***\n                               (0.24)   \n----------------------------------------\nAIC                         47122.79    \nBIC                         47143.43    \nLog Likelihood             -23558.40    \nNum. obs.                    7185       \nNum. groups: schoolid         160       \nVar: schoolid (Intercept)       8.61    \nVar: Residual                  39.15    \n========================================\n*** p &lt; 0.001; ** p &lt; 0.01; * p &lt; 0.05\n\n\nEn este modelo es posible identificar \\(\\gamma_{00}\\) (intercept - fixed effects), así como también los componentes la varianza:\n\n\\(\\tau_{00}\\) (Var:id)\n\\(\\sigma^2\\) (Var:Residual).\n\nCon estos últimos coeficientes aleatorios es posible calcular la correlación intraclase (\\(\\rho\\)).\nCorrelación intra-clase = ICC = \\(\\rho=\\frac{\\tau_{00}}{\\tau_{00}+\\sigma^2}\\)\n\n# Cálculo directo en R:\n8.614/(8.614+39.148) # calculo ICC \n\n[1] 0.1803526\n\n# O de manera directa con funcion ICC de reghelper\nreghelper::ICC(results_0)\n\n[1] 0.1803518"
  },
  {
    "objectID": "assignment/03-practico.html#modelo-1-predictores-de-nivel-individual",
    "href": "assignment/03-practico.html#modelo-1-predictores-de-nivel-individual",
    "title": "Práctica 3. Estimación modelos multinivel con lmer en R",
    "section": "Modelo 1: Predictores de nivel individual",
    "text": "Modelo 1: Predictores de nivel individual\n\nresults_1 = lmer(mathach ~ 1 + ses + female + (1 | schoolid), data = mlm)\nscreenreg(results_1, naive=TRUE)\n\n\n========================================\n                           Model 1      \n----------------------------------------\n(Intercept)                    13.28 ***\n                               (0.20)   \nses                             2.36 ***\n                               (0.11)   \nfemale                         -1.19 ***\n                               (0.17)   \n----------------------------------------\nAIC                         46605.73    \nBIC                         46640.13    \nLog Likelihood             -23297.86    \nNum. obs.                    7185       \nNum. groups: schoolid         160       \nVar: schoolid (Intercept)       4.49    \nVar: Residual                  36.81    \n========================================\n*** p &lt; 0.001; ** p &lt; 0.01; * p &lt; 0.05"
  },
  {
    "objectID": "assignment/03-practico.html#modelo-2-predictores-nivel-2",
    "href": "assignment/03-practico.html#modelo-2-predictores-nivel-2",
    "title": "Práctica 3. Estimación modelos multinivel con lmer en R",
    "section": "Modelo 2: Predictores nivel 2",
    "text": "Modelo 2: Predictores nivel 2\n\nresults_2 = lmer(mathach ~ 1 + sector + mnses + (1 | schoolid), data = mlm)\nscreenreg(results_2)\n\n\n========================================\n                           Model 1      \n----------------------------------------\n(Intercept)                    12.13 ***\n                               (0.20)   \nsector                          1.23 ***\n                               (0.31)   \nmnses                           5.33 ***\n                               (0.37)   \n----------------------------------------\nAIC                         46956.50    \nBIC                         46990.90    \nLog Likelihood             -23473.25    \nNum. obs.                    7185       \nNum. groups: schoolid         160       \nVar: schoolid (Intercept)       2.31    \nVar: Residual                  39.16    \n========================================\n*** p &lt; 0.001; ** p &lt; 0.01; * p &lt; 0.05"
  },
  {
    "objectID": "assignment/03-practico.html#modelo-3-predictores-individuales-y-grupales",
    "href": "assignment/03-practico.html#modelo-3-predictores-individuales-y-grupales",
    "title": "Práctica 3. Estimación modelos multinivel con lmer en R",
    "section": "Modelo 3: Predictores individuales y grupales",
    "text": "Modelo 3: Predictores individuales y grupales\n\nresults_3 = lmer(mathach ~ 1 + ses + female + sector + mnses + (1 | schoolid), data = mlm)\nscreenreg(results_3)\n\n\n========================================\n                           Model 1      \n----------------------------------------\n(Intercept)                    12.74 ***\n                               (0.21)   \nses                             2.15 ***\n                               (0.11)   \nfemale                         -1.20 ***\n                               (0.16)   \nsector                          1.25 ***\n                               (0.30)   \nmnses                           3.07 ***\n                               (0.37)   \n----------------------------------------\nAIC                         46515.61    \nBIC                         46563.77    \nLog Likelihood             -23250.80    \nNum. obs.                    7185       \nNum. groups: schoolid         160       \nVar: schoolid (Intercept)       2.15    \nVar: Residual                  36.80    \n========================================\n*** p &lt; 0.001; ** p &lt; 0.01; * p &lt; 0.05"
  },
  {
    "objectID": "assignment/03-practico.html#modelo-4-pendiente-aleatoria",
    "href": "assignment/03-practico.html#modelo-4-pendiente-aleatoria",
    "title": "Práctica 3. Estimación modelos multinivel con lmer en R",
    "section": "Modelo 4: Pendiente aleatoria",
    "text": "Modelo 4: Pendiente aleatoria\n\nresults_4 = lmer(mathach ~ 1 + ses + female + mnses + sector + (1 + ses | schoolid), data = mlm)\nscreenreg(results_4)\n\n\n============================================\n                               Model 1      \n--------------------------------------------\n(Intercept)                        12.65 ***\n                                   (0.21)   \nses                                 2.16 ***\n                                   (0.12)   \nfemale                             -1.19 ***\n                                   (0.16)   \nmnses                               3.07 ***\n                                   (0.38)   \nsector                              1.43 ***\n                                   (0.30)   \n--------------------------------------------\nAIC                             46514.33    \nBIC                             46576.24    \nLog Likelihood                 -23248.16    \nNum. obs.                        7185       \nNum. groups: schoolid             160       \nVar: schoolid (Intercept)           2.22    \nVar: schoolid ses                   0.42    \nCov: schoolid (Intercept) ses       0.27    \nVar: Residual                      36.59    \n============================================\n*** p &lt; 0.001; ** p &lt; 0.01; * p &lt; 0.05"
  },
  {
    "objectID": "assignment/03-practico.html#modelo-5-interacción-entre-niveles",
    "href": "assignment/03-practico.html#modelo-5-interacción-entre-niveles",
    "title": "Práctica 3. Estimación modelos multinivel con lmer en R",
    "section": "Modelo 5: Interacción entre niveles",
    "text": "Modelo 5: Interacción entre niveles\n$mathach= {00}(intercepto)+{10}ses_{ij}+ \\(\\gamma_{01}sector_j+\\gamma_{11}ses_{ij} *sector{j}+\\) \\(\\mu_{0j}(intercepto)+\\mu_{1j}ses_{ij}+ r_{ij}\\)\n\nresults_5 = lmer(mathach ~ 1 + female + ses*sector + mnses + (1 + ses | schoolid), data = mlm)\nscreenreg(results_5)\n\n\n============================================\n                               Model 1      \n--------------------------------------------\n(Intercept)                        12.81 ***\n                                   (0.21)   \nfemale                             -1.18 ***\n                                   (0.16)   \nses                                 2.73 ***\n                                   (0.14)   \nsector                              1.29 ***\n                                   (0.29)   \nmnses                               3.04 ***\n                                   (0.37)   \nses:sector                         -1.31 ***\n                                   (0.21)   \n--------------------------------------------\nAIC                             46482.91    \nBIC                             46551.71    \nLog Likelihood                 -23231.45    \nNum. obs.                        7185       \nNum. groups: schoolid             160       \nVar: schoolid (Intercept)           2.11    \nVar: schoolid ses                   0.03    \nCov: schoolid (Intercept) ses       0.17    \nVar: Residual                      36.60    \n============================================\n*** p &lt; 0.001; ** p &lt; 0.01; * p &lt; 0.05"
  },
  {
    "objectID": "assignment/05-practico.html",
    "href": "assignment/05-practico.html",
    "title": "Predicción de efectos aleatorios",
    "section": "",
    "text": "1 Cargar/instalar librerías\n\npacman::p_load(lme4,foreign, stargazer, texreg, lattice, sjPlot, dplyr, ggplot2, ggeffects) # paquetes a cargar\n\n\n\n2 Leer datos base High School and Beyond (HSB)\nComo en sesión anterior\n\nmlm = read.dta(\"http://www.stata-press.com/data/mlmus3/hsb.dta\")\ndim(mlm)\nnames(mlm)\nattach(mlm)\n\n#Agregacion de casos a escuelas\nagg_mlm=mlm %&gt;% group_by(schoolid) %&gt;% summarise_all(funs(mean))\n\n\n\n3 Coeficientes aleatorios\nEstos coeficientes se asocian a la posibilidad de estimar variabilidad de intercepto y de pendiente(s) a través de las unidades de nivel 2. Volviendo a la estimación de un modelo con intercepto y pendiente aleatoria:\n\\(y_{ij}=\\gamma_{00}+\\gamma_{10}X_{ij}+\\mu_{0j}+\\mu_{1j}X_{ij}+ r_{ij}\\)\nreg_mlm0=lmer(mathach ~ 1 + ( 1 | schoolid), data = mlm)\nreg_mlm1=lmer(mathach ~ 1 + ses + sector +( 1 | schoolid), data = mlm)\n\nreg_mlm2 = lmer(mathach ~ 1 + ses + (1 +ses | schoolid), data=mlm)\nhtmlreg(reg_mlm2, doctype = FALSE)\n\n\n\nStatistical models\n\n\n\n\n \n\n\nModel 1\n\n\n\n\n\n\n(Intercept)\n\n\n12.67***\n\n\n\n\n \n\n\n(0.19)\n\n\n\n\nses\n\n\n2.39***\n\n\n\n\n \n\n\n(0.12)\n\n\n\n\nAIC\n\n\n46652.40\n\n\n\n\nBIC\n\n\n46693.68\n\n\n\n\nLog Likelihood\n\n\n-23320.20\n\n\n\n\nNum. obs.\n\n\n7185\n\n\n\n\nNum. groups: schoolid\n\n\n160\n\n\n\n\nVar: schoolid (Intercept)\n\n\n4.83\n\n\n\n\nVar: schoolid ses\n\n\n0.41\n\n\n\n\nCov: schoolid (Intercept) ses\n\n\n-0.15\n\n\n\n\nVar: Residual\n\n\n36.83\n\n\n\n\n\n\n***p &lt; 0.001; **p &lt; 0.01; *p &lt; 0.05\n\n\n\n\n\nEn este modelo vemos la estimación de efectos fijos y aleatorios: fijo para intercepto y pendiente, y aleatorios para intercepto y pendiente. Para poder ver el resultado de la estimación, se puede realizar la predicción de los efectos aleatorios y gráficos.\n\n\n4 Empirical bayes / posterior means para null model\n\\(\\hat{\\beta}^{EB}_{0j}=\\gamma_j\\hat{\\beta}_{0j}+(1-\\gamma_j)\\hat{\\gamma}_{00}\\)\nDonde:\n-\\(\\hat{\\beta}^{EB}_{0j}\\): estimador empirical bayes del intercepto para el grupo \\(j\\) -\\(\\gamma_j\\) es un ponderador que se define como la confiabilidad del promedio del grupo, y que equivale a\n\\(\\gamma_j=\\frac{\\tau_{00}}{\\tau_{00}+\\sigma^2/n_j}\\)\n-\\(\\hat{\\beta}_{0j}\\): es el promedio del grupo -\\(\\hat{\\gamma}_{00}\\): gran promedio (efecto fijo intercepto)\nEntonces, primero seleccionamos una escuela como ejemplo (id 1477)\n\nattach(mlm)\nmlm %&gt;% group_by(schoolid) %&gt;% summarise(mean(mathach),count=n()) %&gt;% slice(1:20)\n\nmlm %&gt;% group_by(schoolid) %&gt;% summarise(mean(mathach),count=n()) %&gt;% filter(schoolid==1477)\n\nid1477&lt;- mlm[ which(mlm$schoolid==1477), ] # subset datos para id 1477\nid1477\ndim(id1477)\n\n\\(\\gamma_j\\)\n\nvarcomp=as.data.frame(VarCorr(reg_mlm0)) # entrega matriz componentes varianza como base de datos\n\n#recordar reg_mlm0 es la estimación de arriba del modelo nulo\n\ntau00=varcomp[1,4]\nsigma2=varcomp[2,4]\ngama_j=tau00/(tau00+(sigma2/62)) # 62 es el N de la escuela 1477\n\n\\(\\hat{\\beta}_{0j}\\)\n\nmean_j= mlm %&gt;% filter(schoolid==1477) %&gt;% summarise(mean(mathach))\n\nmean_j\n\n  mean(mathach)\n1      14.22847\n\n\n\\(\\hat{\\gamma}_{00}\\)\n\ngama_00= reg_mlm0@beta # beta es el nombre del estimador gama00 en el objeto\ngama_00\n\n[1] 12.63697\n\n\nEstimación media posterior intercepto para id 1477\n\nint_eb=gama_j*(mean_j)+((1-gama_j)*(reg_mlm0@beta))\n\nComparaciones (ver “shrinkage effect”)\n\nint_eb\n\n  mean(mathach)\n1      14.11978\n\nmean_j\n\n  mean(mathach)\n1      14.22847\n\nmean(mathach)\n\n[1] 12.74785\n\n\nContrastar shrinkage para N más pequeño\n\ngama_j2=tau00/(tau00+(sigma2/20))\nint_eb2=gama_j2*(mean_j)+((1-gama_j2)*(reg_mlm0@beta))\nint_eb2 # aumenta shrinkage a medida que disminuye N del grupo\n\n  mean(mathach)\n1      13.93379\n\n\n\n\n5 Predicción efectos aleatorios\nComandos coef y ranef\n\nreg_mlm0=lmer(mathach ~ 1 + ( 1 | schoolid), data = mlm)\nreg_mlm1=lmer(mathach ~ 1 + ses + sector +( 1 | schoolid), data = mlm)\nhead(ranef(reg_mlm0)) # U0j para cada escuela\nhead(coef(reg_mlm0)) # comparar, coef entrega intercepto para cada escuela\n                    # = gamma_00 + U0j\n\nPara el casode id 1477:\n\ngama_00+1.4828 # = coef\n\n[1] 14.11977\n\n\nModelos con predictores (fijos)\n\nreg_mlm0=lmer(mathach ~ 1 + ( 1 | schoolid), data = mlm)\nreg_mlm1=lmer(mathach ~ 1 + ses + sector +( 1 | schoolid), data = mlm)\n\nmlm$mlm1 &lt;- predict(reg_mlm1)\n\nmlm %&gt;%  \n  ggplot(aes(ses, mlm1, color = schoolid, group = schoolid)) + \n  geom_smooth(se = F, method = lm) \n\n\n\ngraf1 &lt;- ggpredict(reg_mlm1, terms = c(\"ses\",\"schoolid [sample=8]\"), type=\"re\")\n\nplot(graf1)\n\n\n\n\nPredictores aleatorios\n\nreg_mlm2=lmer(mathach ~ 1 + ses + sector +( 1 + ses | schoolid), data = mlm)\n\ngraf2=ggpredict(reg_mlm2, terms = c(\"ses\",\"schoolid [sample=9]\"), type=\"random\")\n\n\nplot(graf2)\n\n\n\n\n\n\n6 Foro"
  },
  {
    "objectID": "assignment/index.html",
    "href": "assignment/index.html",
    "title": "Instrucciones generales",
    "section": "",
    "text": "Los prácticos consisten en el desarrollo de una guía práctica (por lo general cada semana) donde se aplican y profundizan los contenidos de las clases, y donde también se abordan otras temáticas relacionadas al manejo y repote de datos. La organización semestras se puede revisar en la planificación del curso.\nEl trabajo con estas guías se organiza en los siguientes momentos:\n\ncada estudiante realiza la guía de manera autónoma durante la semana\nen caso de dudas que surjan durante la semana se recomienda preguntar en el foro de Giscus al final del práctico, para lo cual se requiere tener cuenta en Github. La cuenta gratis y fácil de obtener, y el servicio muy útil. Si se quiere saber en qué consiste se recomienda revisar la siguiente clase del curso Ciencia Social Abierta\n\nEn las prácticas vamos a trabajar con el software R, Versión 4.3.1."
  },
  {
    "objectID": "assignment/index.html#descripción",
    "href": "assignment/index.html#descripción",
    "title": "Instrucciones generales",
    "section": "",
    "text": "Los prácticos consisten en el desarrollo de una guía práctica (por lo general cada semana) donde se aplican y profundizan los contenidos de las clases, y donde también se abordan otras temáticas relacionadas al manejo y repote de datos. La organización semestras se puede revisar en la planificación del curso.\nEl trabajo con estas guías se organiza en los siguientes momentos:\n\ncada estudiante realiza la guía de manera autónoma durante la semana\nen caso de dudas que surjan durante la semana se recomienda preguntar en el foro de Giscus al final del práctico, para lo cual se requiere tener cuenta en Github. La cuenta gratis y fácil de obtener, y el servicio muy útil. Si se quiere saber en qué consiste se recomienda revisar la siguiente clase del curso Ciencia Social Abierta\n\nEn las prácticas vamos a trabajar con el software R, Versión 4.3.1."
  },
  {
    "objectID": "assignment/index.html#trabajo-con-software-r",
    "href": "assignment/index.html#trabajo-con-software-r",
    "title": "Instrucciones generales",
    "section": "Trabajo con software R",
    "text": "Trabajo con software R\nPara los análisis estadísticos de este curso usamos el programa R, en parte porque es gratuito, pero la principal razón es que es de código abierto. Esto quiere decir que cualquier persona puede revisar cómo está hecho y aportar con modificaciones y procedimientos nuevos, como son las librerías que realizan funciones específicas.\nEl carácter de apertura de R posee muchas ventajas, pero también conlleva complicaciones. Se actualiza permanentemente, así como también las librerías, y esto puede generar problemas de compatibilidad y de fallas en ejecución del código de análisis.\nPara minimizar estos posibles problemas en este curso, vamos a:\n\ntrabajar con la misma y última versión de R, que es la 4.3\nevitar uso de tilde, ñ, espacios y mayúsculas tanto en carpetas y archivos, así como también en los nombres de las variables"
  },
  {
    "objectID": "assignment/index.html#sobre-errores-y-consultas-sobre-problemas-con-r-y-ejecución-de-código",
    "href": "assignment/index.html#sobre-errores-y-consultas-sobre-problemas-con-r-y-ejecución-de-código",
    "title": "Instrucciones generales",
    "section": "Sobre errores y consultas sobre problemas con R y ejecución de código",
    "text": "Sobre errores y consultas sobre problemas con R y ejecución de código\nEn caso de problemas con ejecución de código, se sugiere intentar solucionarlo autónomamente por no más de 10 minutos, si los problemas siguen entonces consultar.\nSe sugiere que las consultas sobre problemas en la ejecución del código y otros se realicen en los foros al final de los prácticos correspondientes (en Giscus), para lo cual se requiere solo habilitar una cuenta en Github. Al hacer la consulta, adjuntar la siguiente información:\n\nCódigo completo hasta que se produce el problema\nIndicar línea del código donde se produce el problema\nAdjuntar el resultado del output de la información de la sesión (sessionInfo())\n\n\nInstalación de R & RStudio\nPara esta versión del curso vamos a trabajar con el programa R Version 4.3 y con RStudio, que ofrece un entorno más amigable para trabajar con R.\nPara instalar R: ir a https://cran.r-project.org/index.html y bajar/instalar la versión correspondiente a la plataforma utilizada (Windows, Mac o Linux)\nPara instalar RStudio: ir a https://rstudio.com/products/rstudio/ y bajar/instalar RStudio desktop, Open Source License (libre).\nEn caso de dudas se puede revisar el siguiente video tutorial de instalación de R & RStudio, preparado por Julio Iturra (apoyo docente) del curso Estadística Multivariada 2020:\n\n\n\n\n\nSi por alguna razón se prefiere trabajar sin descargar, también se puede utilizar RCloud, abajo un tutorial preparado por Valentina Andrade para el curso de Estadística Multivariada:\n\n\n\n\n\n\n\nSobre el trabajo en hojas de código en RStudio\n\nEl trabajo de análisis en RStudio se efectua en una hoja de código (o R script o sintaxis, o para los usuarios de Stata la do-file), que es donde se anotan los comandos y funciones. Para abrir una hoja, en RStudio ir a File &gt; New File &gt; R Script (o ctrl+shift+N),y aparecerá un panel con una pestaña “Untitled” (sin título). Esta es la hoja de código donde se anotan los comandos.\nLos contenidos de las hojas de código son básicamente 2:\n\ncomandos o funciones: se escriben en la hoja, y para ejecutarlos se debe posicionar el cursor en la línea respectiva y ctrl+enter, el resultado aparecerá en el panel de resultados o Consola.\ntexto: para escribir títulos, comentarios, y todo lo que permita entender qué se está haciendo, al principio de la línea respectiva escribir el signo #\n\nPara grabar nuestra hoja de código y así respaldar nuestros análisis, File &gt; Save (o ctrl+s), y dar un nombre al archivo. Recordar: breve, sin espacios ni tildes ni eñes. Por defecto, la extensión de estos archivos es .R"
  },
  {
    "objectID": "content/01-content.html",
    "href": "content/01-content.html",
    "title": "Presentación",
    "section": "",
    "text": "Documento de presentación\n\n\n\n\nForo"
  },
  {
    "objectID": "content/03-content.html",
    "href": "content/03-content.html",
    "title": "Presentación",
    "section": "",
    "text": "Documento de presentación\n\n\n\n\nForo"
  },
  {
    "objectID": "content/05-content.html",
    "href": "content/05-content.html",
    "title": "Presentación",
    "section": "",
    "text": "Documento de presentación\n\n\n\n\nVideo de la sesion\n\n\n\n\n\n\n\nForo"
  },
  {
    "objectID": "content/07-content.html",
    "href": "content/07-content.html",
    "title": "Presentaciones de trabajos",
    "section": "",
    "text": "Hoy sesión de presentación de avances de trabajos.\n\n\nForo"
  },
  {
    "objectID": "content/09-content.html",
    "href": "content/09-content.html",
    "title": "Presentación",
    "section": "",
    "text": "Documento de presentación\n\n\n\n\nForo"
  },
  {
    "objectID": "example/cace.html",
    "href": "example/cace.html",
    "title": "Complier average treatment effects",
    "section": "",
    "text": "Throughout this course, we’ve talked about the difference between the average treatment effect (ATE), or the average effect of a program for an entire population, and conditional average treatment effect (CATE), or the average effect of a program for some segment of the population. There are all sorts of CATEs: you can find the CATE for men vs. women, for people who are treated with the program (the average treatment on the treated, or ATT or TOT), for people who are not treated with the program (the average treatment on the untreated, or ATU), and so on.\nOne important type of CATE is the effect of a program on just those who comply with the program. We can call this the complier average treatment effect, but the acronym would be the same as conditional average treatment effect, so we’ll call it the complier average causal effect or CACE.\nThinking about compliance is important. You might randomly assign people to receive treatment or a program, but people might not do what you tell them. Additionally, people might do the program if assigned to do it, but they would have done it anyway. We can split the population into four types of people:\n\nCompliers: People who follow whatever their assignment is (if assigned to treatment, they do the program; if assigned to control, they don’t)\nAlways takers: People who will receive or seek out the program regardless of assignment (if assigned to treatment, they do the program; if assigned to control, they still do the program)\nNever takers: People who will not receive or seek out the program regardless of assignment (if assigned to treatment, they don’t do the program; if assigned to control, they also don’t do it)\nDefiers: People who will do the opposite of whatever their assignment is (if assigned to treatment, they don’t do the program; if assigned to control, they do the program)\n\nTo simplify things, evaluators and econometricians assume that defiers don’t exist based on the idea of monotonicity, which means that we can assume that the effect of being assigned to treatment only increases the likelihood of participating in the program (and doesn’t make it more likely).\nThe tricky part about trying to find who the compliers are in a sample is that we can’t know what people would have done in the absence of treatment. If we see that someone in the experiment was assigned to be in the treatment group and they then participated in the program, they could be a complier (since they did what they were assigned to do), or they could be an always taker (they did what they were assigned to do, but they would have done it anyway). Due to the fundamental problem of causal inference, we cannot know what each person would have done in a parallel world.\nWe can use data from a hypothetical program to see how these three types of compliers distort our outcomes, and more importantly, how we can disentangle compliers from their always- and never-taker counterparts.\nIf you want to follow along with this example, you can download these two datasets:\n\n bed_nets_time_machine.csv\n bed_nets_observed.csv"
  },
  {
    "objectID": "example/cace.html#compliance-and-treatment-effects",
    "href": "example/cace.html#compliance-and-treatment-effects",
    "title": "Complier average treatment effects",
    "section": "",
    "text": "Throughout this course, we’ve talked about the difference between the average treatment effect (ATE), or the average effect of a program for an entire population, and conditional average treatment effect (CATE), or the average effect of a program for some segment of the population. There are all sorts of CATEs: you can find the CATE for men vs. women, for people who are treated with the program (the average treatment on the treated, or ATT or TOT), for people who are not treated with the program (the average treatment on the untreated, or ATU), and so on.\nOne important type of CATE is the effect of a program on just those who comply with the program. We can call this the complier average treatment effect, but the acronym would be the same as conditional average treatment effect, so we’ll call it the complier average causal effect or CACE.\nThinking about compliance is important. You might randomly assign people to receive treatment or a program, but people might not do what you tell them. Additionally, people might do the program if assigned to do it, but they would have done it anyway. We can split the population into four types of people:\n\nCompliers: People who follow whatever their assignment is (if assigned to treatment, they do the program; if assigned to control, they don’t)\nAlways takers: People who will receive or seek out the program regardless of assignment (if assigned to treatment, they do the program; if assigned to control, they still do the program)\nNever takers: People who will not receive or seek out the program regardless of assignment (if assigned to treatment, they don’t do the program; if assigned to control, they also don’t do it)\nDefiers: People who will do the opposite of whatever their assignment is (if assigned to treatment, they don’t do the program; if assigned to control, they do the program)\n\nTo simplify things, evaluators and econometricians assume that defiers don’t exist based on the idea of monotonicity, which means that we can assume that the effect of being assigned to treatment only increases the likelihood of participating in the program (and doesn’t make it more likely).\nThe tricky part about trying to find who the compliers are in a sample is that we can’t know what people would have done in the absence of treatment. If we see that someone in the experiment was assigned to be in the treatment group and they then participated in the program, they could be a complier (since they did what they were assigned to do), or they could be an always taker (they did what they were assigned to do, but they would have done it anyway). Due to the fundamental problem of causal inference, we cannot know what each person would have done in a parallel world.\nWe can use data from a hypothetical program to see how these three types of compliers distort our outcomes, and more importantly, how we can disentangle compliers from their always- and never-taker counterparts.\nIf you want to follow along with this example, you can download these two datasets:\n\n bed_nets_time_machine.csv\n bed_nets_observed.csv"
  },
  {
    "objectID": "example/cace.html#finding-compliers-with-a-mind-reading-time-machine",
    "href": "example/cace.html#finding-compliers-with-a-mind-reading-time-machine",
    "title": "Complier average treatment effects",
    "section": "Finding compliers with a mind-reading time machine",
    "text": "Finding compliers with a mind-reading time machine\nFirst let’s load the data and reorder some of the categories:\n\n\nCode\nlibrary(tidyverse)  # ggplot(), %&gt;%, mutate(), and friends\nlibrary(broom)  # Convert models to data frames\nlibrary(estimatr)  # Run 2SLS models in one step with iv_robust()\n\nbed_nets &lt;- read_csv(\"data/bed_nets_observed.csv\") %&gt;%\n  # Make \"No bed net\" (control) come first\n  mutate(bed_net = fct_relevel(bed_net, \"No bed net\"))\n\nbed_nets_time_machine &lt;- read_csv(\"data/bed_nets_time_machine.csv\") %&gt;%\n  # Make \"No bed net\" come first and \"Complier\" come first\n  mutate(bed_net = fct_relevel(bed_net, \"No bed net\"),\n         status = fct_relevel(status, \"Complier\"))\n\n\nThis is what we would be able to see if we could read everyone’s minds. There are always takers who will use a bed net regardless of the program, and they’ll have higher health outcomes. However, those better outcomes are because of something endogenous—there’s something else that makes these people always pursue bed nets, and that’s likely related to health. We probably want to not consider them when looking for the program effect. There are never takers who won’t ever use a bed net, and they have worse health outcomes. Again, there’s endogeneity here—something is causing them to not use the bed nets, and it likely also causes their health level. We don’t want to look at them either.\nThe first group—the compliers—are the people we want to focus on. Here we see that the program had an effect when compared to a control group.\n\n\nCode\nset.seed(1234)  # Make the jittering the same every time\n\nggplot(bed_nets_time_machine, aes(y = health, x = treatment)) +\n  geom_point(aes(shape = bed_net, color = status),\n             position = position_jitter(height = NULL, width = 0.25)) +\n  facet_wrap(vars(status)) +\n  labs(color = \"Type of person\", shape = \"Compliance\",\n       x = NULL, y = \"Health status\") +\n  scale_color_viridis_d(option = \"plasma\", end = 0.85) +\n  theme_bw()"
  },
  {
    "objectID": "example/cace.html#finding-compliers-in-actual-data",
    "href": "example/cace.html#finding-compliers-in-actual-data",
    "title": "Complier average treatment effects",
    "section": "Finding compliers in actual data",
    "text": "Finding compliers in actual data\nThis is what we actually see in the data, though. You can tell who some of the always takers are (those who used bed nets after being assigned to the control group) and who some of the never takers are (those who did not use a bed net after being assigned to the treatment group), but compliers are mixed up with the always and never takers. We have to somehow disentangle them!\n\n\nCode\nset.seed(1234)\nggplot(bed_nets_time_machine, aes(y = health, x = bed_net)) +\n  geom_point(aes(shape = bed_net, color = status),\n             position = position_jitter(height = NULL, width = 0.25)) +\n  facet_wrap(vars(treatment)) +\n  labs(color = \"Type of person\", shape = \"Compliance\",\n       x = NULL, y = \"Health status\") +\n  scale_color_viridis_d(option = \"plasma\", end = 0.85) +\n  theme_bw()\n\n\n\n\n\n\n\n\n\nWe can do this by assuming the proportion of compliers, never takers, and always takers are equally spread across treatment and control (which we can assume through the magic of randomization). If that’s the case, we can calculate the intent to treat (ITT) effect, which is the CATE of being assigned treatment (or the effect of being assigned treatment on health status, regardless of actual compliance).\nThe ITT is actually composed of three different causal effects: the complier average causal effect (CACE), the always taker average causal effect (ATACE), and the never taker average causal effect (NTACE). In the formula below, \\(\\pi\\) stands for the proportion of people in each group. Formally, the ITT can be defined like this:\n\\[\n\\begin{aligned}\n\\text{ITT}\\ =\\ & \\color{#0D0887}{\\pi_\\text{compliers} \\times (\\text{T} - \\text{C})_\\text{compliers}} + \\\\\n&\\color{#B7318A}{\\pi_\\text{always takers} \\times (\\text{T} - \\text{C})_\\text{always takers}} + \\\\\n&\\color{#FEBA2C}{\\pi_\\text{never takers} \\times (\\text{T} - \\text{C})_\\text{never takers}}\n\\end{aligned}\n\\]\nWe can simplify this to this acronymized version:\n\\[\n\\text{ITT}\\ =\\ \\color{#0D0887}{\\pi_\\text{C} \\text{CACE}} + \\color{#B7318A}{\\pi_\\text{A} \\text{ATACE}} + \\color{#FEBA2C}{\\pi_\\text{N} \\text{NTACE}}\n\\]\nThe number we care about the most here is the CACE, which is stuck in the middle of the equation. But we can rescue it with some fun logical and algebraic trickery!\nIf we assume that assignment to treatment doesn’t make someone more likely to be an always taker or a never taker, we can set the ATACE and NTACE to zero, leaving us with just three variables to worry about: ITT, \\(\\pi_\\text{c}\\), and CACE:\n\\[\n\\begin{aligned}\n\\text{ITT}\\ =\\ & \\color{#0D0887}{\\pi_\\text{C} \\text{CACE}} + \\color{#B7318A}{\\pi_\\text{A} \\text{ATACE}} + \\color{#FEBA2C}{\\pi_\\text{N} \\text{NTACE}} \\\\[6pt]\n=\\ & \\color{#0D0887}{\\pi_\\text{C} \\text{CACE}} + \\color{#B7318A}{\\pi_\\text{A} \\times 0} + \\color{#FEBA2C}{\\pi_\\text{N} \\times 0}\\\\[6pt]\n\\text{ITT}\\ =\\ & \\color{#0D0887}{\\pi_\\text{C} \\text{CACE}}\n\\end{aligned}\n\\]\nWe can use algebra to rearrange this formula so that we’re left with an equation that starts with CACE (since that’s the value we care about):\n\\[\n\\text{CACE} = \\frac{\\text{ITT}}{\\pi_\\text{C}}\n\\]\nIf we can find the ITT and the proportion of compliers, we can find the complier average causal effect (CACE). Fortunately, both those pieces—ITT and \\(\\pi_\\text{C}\\)—are findable in the data we have!"
  },
  {
    "objectID": "example/cace.html#finding-the-itt",
    "href": "example/cace.html#finding-the-itt",
    "title": "Complier average treatment effects",
    "section": "Finding the ITT",
    "text": "Finding the ITT\nThe ITT is easy to find with a simple OLS model:\n\n\nCode\nitt_model &lt;- lm(health ~ treatment, data = bed_nets)\n\ntidy(itt_model)\n## # A tibble: 2 × 5\n##   term               estimate std.error statistic  p.value\n##   &lt;chr&gt;                 &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;\n## 1 (Intercept)           40.9      0.444     92.1  0       \n## 2 treatmentTreatment     5.99     0.630      9.51 5.20e-21\n\nITT &lt;- tidy(itt_model) %&gt;%\n  filter(term == \"treatmentTreatment\") %&gt;%\n  pull(estimate)\n\n\nThe ITT here is ≈6—being assigned treatment increases average health status by 5.99 health points."
  },
  {
    "objectID": "example/cace.html#finding-the-proportion-of-compliers",
    "href": "example/cace.html#finding-the-proportion-of-compliers",
    "title": "Complier average treatment effects",
    "section": "Finding the proportion of compliers",
    "text": "Finding the proportion of compliers\nThe proportion of compliers is a little trickier, but doable with some algebraic trickery. Recall from the graph above that the people who were in the treatment group and who complied are a combination of always takers and compliers. This means we can say:\n\\[\n\\begin{aligned}\n\\pi_\\text{A} + \\pi_\\text{C} =& \\text{% yes in treatment; or} \\\\\n\\pi_\\text{C} =& \\text{% yes in treatment} - \\pi_\\text{A}\n\\end{aligned}\n\\]\nWe actually know \\(\\pi_\\text{A}\\)—remember in the graph above that the people who were in the control group and who used bed nets are guaranteed to be always takers (none of them are compliers or never takers). If we assume that the proportion of always takers is the same in both treatment and control, we can use that percent here, giving us this final equation for \\(\\pi_\\text{C}\\):\n\\[\n\\begin{aligned}\n\\pi_\\text{C} =& \\text{% yes in treatment} - \\pi_\\text{A} \\\\\n=& \\text{% yes in treatment} - \\text{% yes in control}\n\\end{aligned}\n\\]\nSo, if we can find the percent of people assigned to treatment who used bed nets, find the percent of people assigned to control and used bed nets, and subtract the two percentages, we’ll have the proportion of compliers, or \\(\\pi_\\text{C}\\). We can do that with the data we have (61% - 19.5% = 41.5% compliers):\n\n\nCode\nbed_nets %&gt;%\n  group_by(treatment, bed_net) %&gt;%\n  summarize(n = n()) %&gt;%\n  mutate(prop = n / sum(n))\n## # A tibble: 4 × 4\n## # Groups:   treatment [2]\n##   treatment bed_net        n  prop\n##   &lt;chr&gt;     &lt;fct&gt;      &lt;int&gt; &lt;dbl&gt;\n## 1 Control   No bed net   808 0.805\n## 2 Control   Bed net      196 0.195\n## 3 Treatment No bed net   388 0.390\n## 4 Treatment Bed net      608 0.610\n\n# pi_c = prop yes in treatment - prop yes in control\npi_c &lt;- 0.6104418 - 0.1952191\n\n\nFinally, now that we know both the ITT and \\(\\pi_\\text{C}\\), we can find the CACE (or the LATE):\n\n\nCode\nCACE &lt;- ITT / pi_c\nCACE\n## [1] 14.43\n\n\nIt’s 14.4, which means that using bed nets increased health by 14 health points for compliers (which is a lot bigger than the 6 that we found before). We successfully filtered out the always takers and the never takers, and we have our complier-specific causal effect."
  },
  {
    "objectID": "example/cace.html#finding-the-cacelate-with-iv2sls",
    "href": "example/cace.html#finding-the-cacelate-with-iv2sls",
    "title": "Complier average treatment effects",
    "section": "Finding the CACE/LATE with IV/2SLS",
    "text": "Finding the CACE/LATE with IV/2SLS\nDoing that is super tedious though! What if there was an easier way to find the effect of the bed net program for just the compliers? We can do this with IV/2SLS regression by using assignment to treatment as an instrument.\nAssignment to treatment works as an instrument because it’s (1) relevant, since being told to use bed nets is probably highly correlated with using bed nets, (2) exclusive, since the only way that being told to use bed nets can cause changes in health is through the actual use of the bed nets, and (3) exogenous, since being told to use bed nets probably isn’t related to other things that cause health.\nHere’s a 2SLS regression with assignment to treatment as the instrument:\n\n\nCode\nmodel_2sls &lt;- iv_robust(health ~ bed_net | treatment, data = bed_nets)\ntidy(model_2sls)\n##             term estimate std.error statistic   p.value conf.low conf.high   df outcome\n## 1    (Intercept)    38.12    0.5151     74.01 0.000e+00    37.11     39.13 1998  health\n## 2 bed_netBed net    14.43    1.2538     11.51 1.038e-29    11.97     16.89 1998  health\n\n\nThe coefficient for bed_net is identical to the CACE that we found manually! Instrumental variables are helpful for isolated program effects to only compliers when you’re dealing with noncompliance."
  },
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "\n            Modelos Multinivel\n        ",
    "section": "",
    "text": "Modelos Multinivel\n        \n        \n            Unidades en contexto\n        \n        \n            SOC01133/MCS7157 • Segundo Semestre 2023Departamento de Sociología, Facultad de Ciencias SocialesUniversidad de Chile\n        \n    \n    \n      \n        \n        \n        \n      \n    \n\n\n\n\n\nProfesor\n\n   Prof. Juan Carlos Castillo\n   325 Sociología FACSO, Universidad de Chile\n   juancastillov@uchile.cl\n   Agendar reunión\n\n\n\nActividades\n\n   Viernes 10:15-11:45 - Sala 44 FACSO\n\n\n\nContacto\nE-mail y foros (Giscus) en las páginas de las clases y prácticos"
  },
  {
    "objectID": "news/index.html",
    "href": "news/index.html",
    "title": "Noticias",
    "section": "",
    "text": "Ordenar por\n       Por defecto\n         \n          Fecha - Menos reciente\n        \n         \n          Fecha - Más reciente\n        \n         \n          Título\n        \n     \n  \n    \n      \n      \n    \n\n\n\n\n\nFecha\n\n\nTítulo\n\n\nCategorías\n\n\n\n\n\n\nlunes agosto 7, 2023 at 12:00 AM\n\n\nBienvenid_s a clases!\n\n\ncomenzando\n\n\n\n\n\n\nNo hay resultados\n\n\n\n\n\n\n\n\nSuscribirse!\n\n\n\nPuedes usar un lector de feeds como Feedly o un servicio RSS-to-email como Blogtrottr para suscribirte a cualquiera de estos mensajes. ::: {.grid}\n\n\n RSS\n\n\n\n\n\n\n\n\n\n:::"
  },
  {
    "objectID": "syllabus.html",
    "href": "syllabus.html",
    "title": "Programa",
    "section": "",
    "text": "Prof. Juan Carlos Castillo\n   325 Sociología FACSO, Universidad de Chile\n   juancastillov@uchile.cl\n   Agendar reunión\n\n\n\n\n\n   Viernes\n   11 Agosto al 28 de Noviembre, 2023\n   10:15 - 11:45\n   Sala 44 - FACSO\n   Slack"
  },
  {
    "objectID": "syllabus.html#unidad-i-introducción-a-la-estimación-multinivel",
    "href": "syllabus.html#unidad-i-introducción-a-la-estimación-multinivel",
    "title": "Programa",
    "section": "1. Unidad I: Introducción a la estimación multinivel",
    "text": "1. Unidad I: Introducción a la estimación multinivel\n• Datos anidados y datos agregados\n• Limitaciones de métodos tradicionales para datos anidados\n• Correlación intra-clase\n• Predictores en distintos niveles\n• Generación e importación de datos nivel 2\n• Reporte"
  },
  {
    "objectID": "syllabus.html#unidad-ii-profundización",
    "href": "syllabus.html#unidad-ii-profundización",
    "title": "Programa",
    "section": "2. Unidad II: Profundización",
    "text": "2. Unidad II: Profundización\n• Pendiente aleatoria\n• Interacción entre niveles\n• Ajuste\n• Centrado de variables\n• Introducción a estimación con datos longitudinales"
  },
  {
    "objectID": "syllabus.html#unidad-iii-aplicaciones-prácticas",
    "href": "syllabus.html#unidad-iii-aplicaciones-prácticas",
    "title": "Programa",
    "section": "3. Unidad III: Aplicaciones prácticas",
    "text": "3. Unidad III: Aplicaciones prácticas\n• En base a trabajos de alumn_s"
  },
  {
    "objectID": "syllabus.html#inasistencias-y-atraso-en-entregas",
    "href": "syllabus.html#inasistencias-y-atraso-en-entregas",
    "title": "Programa",
    "section": "Inasistencias y atraso en entregas",
    "text": "Inasistencias y atraso en entregas\nLos justificativos por ausencia o atraso se realizan en la secretaría de carrera. Lo que la carrera informe como justificado, es lo que se va a considerar en el curso. No enviar justificativos directamente, no es necesario ni apropiado para l_s estudiantes tener que exponer situaciones personales.\nEn caso de faltar a alguna de las evaluaciones existirá una única fecha para evaluaciones recuperativas. Si en esa fecha no es posible asistir por motivos justificados, entonces pasará directo a examen.\nEn el caso de los trabajos, en caso de atraso se descontará 0.5 por día adicional. Si el trabajo no se entrega luego del tercer día de atraso será calificado con nota 1.0"
  },
  {
    "objectID": "syllabus.html#requisitos-de-aprobación",
    "href": "syllabus.html#requisitos-de-aprobación",
    "title": "Programa",
    "section": "Requisitos de aprobación",
    "text": "Requisitos de aprobación\nRequisitos de eximición a examen:\n\ncontar con un promedio ponderado igual o superior a 5.5\nno tener nota bajo 4.0 en ninguna de las evaluaciones\n\nRequisitos para presentación a examen:\n\nPodrán presentarse al examen de primera oportunidad los estudiantes que hayan obtenido una calificación final igual o superior a 3.5.\nEl examen de segunda oportunidad será para aquellos estudiantes que presenten una nota igual o inferior a 3.5 o aquellos que en el examen de primera oportunidad no hubiesen logrado una nota igual o superior a 4.0."
  },
  {
    "objectID": "syllabus.html#bibliografía-obligatoria",
    "href": "syllabus.html#bibliografía-obligatoria",
    "title": "Programa",
    "section": "Bibliografía Obligatoria",
    "text": "Bibliografía Obligatoria\nCapítulos correspondientes a cada sesión se indican en la página de Planificación."
  },
  {
    "objectID": "syllabus.html#varios",
    "href": "syllabus.html#varios",
    "title": "Programa",
    "section": "VARIOS",
    "text": "VARIOS\n\nSe espera asistencia y participación activa, tanto a las sesiones lectivas como a las prácticas. Se pasará lista en todas las sesiones. No habrá penalización por inasistencia, pero si llevaremos registro principalmente con objetivos de monitoreo y retroalimentación del curso\nLas clases en general se acompañan de documentos de presentación, que estarán disponibles antes de la sesión en la página de Contenidos, y están desarrollados con base en Rmarkdown/XaringanRmarkdown/ Xaringan. Estos documentos no son:\n\n“la clase”\nautoexplicativos (ni aspiran a serlo)\n“el ppt” (ni “la ppt”)\n\nPolíticas de participación y trato: se espera y enfatiza la participación por distintos canales disponibles. También se enfatiza un trato respetuoso y horizontal. Quienes están tomando este curso serán referidos como participantes y/o estudiantes, evitar el uso de “l_s cabr_s” o “l_s chiquill_s”, que si bien puede intentar transmitir cercanía finalmente expresan minimización de la contraparte. Quien no se sienta tratad_ apropiadamente o vea que otr_s no lo están siendo, se solicita reportar para solucionar la situación."
  },
  {
    "objectID": "syllabus.html#programación-de-sesiones",
    "href": "syllabus.html#programación-de-sesiones",
    "title": "Programa",
    "section": "Programación de sesiones",
    "text": "Programación de sesiones\nVisitar la página de Planificación."
  }
]